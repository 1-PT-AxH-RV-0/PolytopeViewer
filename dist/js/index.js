/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json":
/*!********************************************************!*\
  !*** ./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__.p + \"assets/Sarasa_Mono_SC_Bold.typeface.json\";\n\n//# sourceURL=webpack:///./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json?");

/***/ }),

/***/ "./assets/models/tri.off":
/*!*******************************!*\
  !*** ./assets/models/tri.off ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__.p + \"assets/tri.off\";\n\n//# sourceURL=webpack:///./assets/models/tri.off?");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/style.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body {\n  margin: 8px;\n}\n\n.button {\n  background-color: #049dd9;\n  border: none;\n  color: white;\n  padding: 8px 12px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 18px;\n  border-radius: 6px;\n  user-select: none;\n  border: 1px solid black;\n  font-family: Verdana, sans-serif;\n  margin: 4px;\n  width: 120px;\n}\n.button:hover {\n  background-color: #0477bf;\n}\n.button:active {\n  background-color: #0468bf;\n  transform: translateY(1px);\n}\n\n.dropdown {\n  position: relative;\n  display: inline-block;\n}\n.dropdown:hover .dropdown-content {\n  display: block;\n}\n.dropdown-content {\n  display: none;\n  bottom: 100%;\n  position: absolute;\n  margin: -4px 4px;\n  border-radius: 8px;\n  border: 1px solid black;\n  text-align: center;\n  background-color: #049dd9;\n  min-width: 120px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n}\n.dropdown-content div {\n  padding: 4px 8px;\n  color: white;\n  font-size: 18px;\n  font-family: Verdana, sans-serif;\n  text-decoration: none;\n  display: block;\n  user-select: none;\n}\n.dropdown-content div:hover {\n  background-color: #0477bf;\n  border-radius: 8px;\n}\n\n#mapText {\n  position: absolute;\n  top: 16px;\n  left: 16px;\n  color: white;\n  font-size: 20px;\n  user-select: none;\n}\n`, \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack:///./src/style.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./src/GLSLs.js":
/*!**********************!*\
  !*** ./src/GLSLs.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar transformCylinderPoint = \"\\nvec3 transformCylinderPoint(vec3 point, vec3 v1, vec3 v2) {\\n    // Compute direction and length\\n    vec3 d = v2 - v1;\\n    float d_length = length(d);\\n    \\n    // If v1 and v2 are too close, return v1 (or discard)\\n    if (d_length < 1e-6) {\\n        return v1; // Or handle as error\\n    }\\n    vec3 d_normalized = d / d_length;\\n\\n    // Step 1: Scale along y-axis\\n    vec3 scaled_point = point * vec3(1.0, d_length, 1.0);\\n\\n    // Step 2: Rotate y-axis to d_normalized\\n    vec3 y_axis = vec3(0.0, 1.0, 0.0);\\n    float dot_product = dot(y_axis, d_normalized);\\n    \\n    // Handle parallel cases (dot_product \\u2248 \\xB11)\\n    if (abs(dot_product) > 0.99999) {\\n        if (dot_product < 0.0) {\\n            // Opposite direction: rotate 180\\xB0 around x-axis\\n            scaled_point.y = -scaled_point.y; // Equivalent to 180\\xB0 rotation\\n        }\\n        // Else: same direction, no rotation needed\\n    } else {\\n        // General case: compute rotation axis and angle\\n        vec3 rotation_axis = normalize(cross(d_normalized, y_axis));\\n        float rotation_angle = acos(clamp(dot_product, -1.0, 1.0));\\n        \\n        // Rodrigues' rotation formula\\n        float cos_angle = cos(rotation_angle);\\n        float sin_angle = sin(rotation_angle);\\n        \\n        mat3 K = mat3(\\n            0.0, -rotation_axis.z, rotation_axis.y,\\n            rotation_axis.z, 0.0, -rotation_axis.x,\\n            -rotation_axis.y, rotation_axis.x, 0.0\\n        );\\n        mat3 R = mat3(1.0) + sin_angle * K + (1.0 - cos_angle) * (K * K);\\n        scaled_point = R * scaled_point;\\n    }\\n\\n    // Step 3: Translate to v1\\n    return scaled_point + v1;\\n}\\n\";\nvar schlegelProjection = \"\\nuniform float projectionDistance;\\nvec3 schlegelProjection(vec4 point4D) {\\n  return projectionDistance * point4D.xyz / (projectionDistance - point4D.w);\\n}\\n\";\nvar create4DRotationMat = \"\\nmat4 create4DRotationMat(float xy_deg, float xz_deg, float xw_deg, \\n                         float yz_deg, float yw_deg, float zw_deg) {\\n    // \\u5C06\\u89D2\\u5EA6\\u8F6C\\u6362\\u4E3A\\u5F27\\u5EA6\\n    float xy = radians(xy_deg);\\n    float xz = radians(xz_deg);\\n    float xw = radians(xw_deg);\\n    float yz = radians(yz_deg);\\n    float yw = radians(yw_deg);\\n    float zw = radians(zw_deg);\\n    \\n    // \\u8BA1\\u7B97\\u5404\\u65CB\\u8F6C\\u89D2\\u5EA6\\u7684\\u6B63\\u5F26\\u548C\\u4F59\\u5F26\\n    float cxy = cos(xy), sxy = sin(xy);\\n    float cxz = cos(xz), sxz = sin(xz);\\n    float cxw = cos(xw), sxw = sin(xw);\\n    float cyz = cos(yz), syz = sin(yz);\\n    float cyw = cos(yw), syw = sin(yw);\\n    float czw = cos(zw), szw = sin(zw);\\n    \\n    // \\u521D\\u59CB\\u5316\\u516D\\u4E2A\\u57FA\\u672C\\u65CB\\u8F6C\\u77E9\\u9635\\n    mat4 Rxy = mat4(\\n        cxy, -sxy, 0.0, 0.0,\\n        sxy,  cxy, 0.0, 0.0,\\n        0.0,  0.0, 1.0, 0.0,\\n        0.0,  0.0, 0.0, 1.0\\n    );\\n    \\n    mat4 Rxz = mat4(\\n        cxz, 0.0, -sxz, 0.0,\\n        0.0, 1.0,  0.0, 0.0,\\n        sxz, 0.0,  cxz, 0.0,\\n        0.0, 0.0,  0.0, 1.0\\n    );\\n    \\n    mat4 Rxw = mat4(\\n        cxw, 0.0, 0.0, -sxw,\\n        0.0, 1.0, 0.0,  0.0,\\n        0.0, 0.0, 1.0,  0.0,\\n        sxw, 0.0, 0.0,  cxw\\n    );\\n    \\n    mat4 Ryz = mat4(\\n        1.0,  0.0, 0.0, 0.0,\\n        0.0,  cyz, -syz, 0.0,\\n        0.0,  syz,  cyz, 0.0,\\n        0.0,  0.0, 0.0, 1.0\\n    );\\n    \\n    mat4 Ryw = mat4(\\n        1.0, 0.0,  0.0, 0.0,\\n        0.0, cyw,  0.0, -syw,\\n        0.0, 0.0,  1.0, 0.0,\\n        0.0, syw,  0.0, cyw\\n    );\\n    \\n    mat4 Rzw = mat4(\\n        1.0, 0.0, 0.0,  0.0,\\n        0.0, 1.0, 0.0,  0.0,\\n        0.0, 0.0, czw, -szw,\\n        0.0, 0.0, szw,  czw\\n    );\\n    \\n    // \\u7EC4\\u5408\\u6240\\u6709\\u65CB\\u8F6C\\uFF08\\u987A\\u5E8F\\u4F1A\\u5F71\\u54CD\\u6700\\u7EC8\\u7ED3\\u679C\\uFF09\\n    return Rzw * Ryw * Ryz * Rxw * Rxz * Rxy;\\n}\\n\\nmat4 create4DRotationMat(float rotation4D[6]) {\\n    return create4DRotationMat(rotation4D[0], rotation4D[1], rotation4D[2], \\n                               rotation4D[3], rotation4D[4], rotation4D[5]);\\n}\\n\";\nvar rotationArrUni = 'uniform float rotation4D[6];';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  schlegelProjection: schlegelProjection,\n  create4DRotationMat: create4DRotationMat,\n  transformCylinderPoint: transformCylinderPoint,\n  rotationArrUni: rotationArrUni\n});\n\n//# sourceURL=webpack:///./src/GLSLs.js?");

/***/ }),

/***/ "./src/axesCreater.js":
/*!****************************!*\
  !*** ./src/axesCreater.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.core.js\");\n/* harmony import */ var three_addons_loaders_FontLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three/addons/loaders/FontLoader.js */ \"./node_modules/three/examples/jsm/loaders/FontLoader.js\");\n/* harmony import */ var three_addons_geometries_TextGeometry_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/addons/geometries/TextGeometry.js */ \"./node_modules/three/examples/jsm/geometries/TextGeometry.js\");\n/* harmony import */ var _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shaderCompCallback.js */ \"./src/shaderCompCallback.js\");\n/* harmony import */ var _geometries_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geometries.js */ \"./src/geometries.js\");\n/* harmony import */ var _assets_fonts_Sarasa_Mono_SC_Bold_typeface_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/fonts/Sarasa_Mono_SC_Bold.typeface.json */ \"./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\nvar axisLength = 100;\nvar cylinderRadius = 0.5;\nvar coneRadius = 2;\nvar coneHeight = 6;\nvar textSize = 5;\nvar textOffset = 7;\nfunction createMaterial(color) {\n  return new three__WEBPACK_IMPORTED_MODULE_3__.MeshPhongMaterial({\n    color: color,\n    shininess: 40\n  });\n}\nfunction loadFontAsync(url) {\n  return new Promise(function (resolve, reject) {\n    var loader = new three_addons_loaders_FontLoader_js__WEBPACK_IMPORTED_MODULE_4__.FontLoader();\n    loader.load(url, function (font) {\n      return resolve(font);\n    }, undefined, function (error) {\n      return reject(error);\n    });\n  });\n}\nfunction createAxisCylinderMesh(axis, color, rotUni, projDistUni) {\n  var geometry = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_1__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_3__.CylinderGeometry(cylinderRadius, cylinderRadius, 1));\n  var vertexCount = geometry.attributes.position.count;\n  var axisArr = new Uint32Array(vertexCount);\n  var lenArr = new Float32Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    axisArr[i] = axis;\n    lenArr[i] = axisLength / 2;\n  }\n  geometry.setAttribute('axis', new three__WEBPACK_IMPORTED_MODULE_3__.Uint32BufferAttribute(axisArr, 1));\n  geometry.setAttribute('len', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(lenArr, 1));\n  var material = createMaterial(color);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].axisMaterial(material, rotUni, projDistUni);\n  var cylinder = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(geometry, material);\n  return cylinder;\n}\nfunction createAxisConeMesh(axis, color, rotUni, projDistUni) {\n  var geometry = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_1__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_3__.ConeGeometry(coneRadius, 1));\n  var vertexCount = geometry.attributes.position.count;\n  var axisArr = new Uint32Array(vertexCount);\n  var lenArr = new Float32Array(vertexCount);\n  var heightArr = new Float32Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    axisArr[i] = axis;\n    lenArr[i] = axisLength / 2;\n    heightArr[i] = coneHeight;\n  }\n  geometry.setAttribute('axis', new three__WEBPACK_IMPORTED_MODULE_3__.Uint32BufferAttribute(axisArr, 1));\n  geometry.setAttribute('len', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(lenArr, 1));\n  geometry.setAttribute('height', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(heightArr, 1));\n  var material = createMaterial(color);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].axisConeMaterial(material, rotUni, projDistUni);\n  var cone = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(geometry, material);\n  return cone;\n}\nfunction createAxisLabelMesh(axis, color, text, font, rotUni, projDistUni) {\n  var geometry = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_1__.toBufferGeometry)(new three_addons_geometries_TextGeometry_js__WEBPACK_IMPORTED_MODULE_5__.TextGeometry(text, {\n    font: font,\n    size: textSize,\n    depth: cylinderRadius * 2,\n    curveSegments: 12\n  }));\n  geometry.computeBoundingBox();\n  geometry.center();\n  var vertexCount = geometry.attributes.position.count;\n  var axisArr = new Uint32Array(vertexCount);\n  var lenArr = new Float32Array(vertexCount);\n  var offsetArr = new Float32Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    axisArr[i] = axis;\n    lenArr[i] = axisLength / 2;\n    offsetArr[i] = coneHeight + textOffset;\n  }\n  geometry.setAttribute('axis', new three__WEBPACK_IMPORTED_MODULE_3__.Uint32BufferAttribute(axisArr, 1));\n  geometry.setAttribute('len', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(lenArr, 1));\n  geometry.setAttribute('offset', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(offsetArr, 1));\n  var material = createMaterial(color);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].axisLabelMaterial(material, rotUni, projDistUni);\n  var label = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(geometry, material);\n  return label;\n}\nfunction createAxes(_x, _x2, _x3) {\n  return _createAxes.apply(this, arguments);\n}\nfunction _createAxes() {\n  _createAxes = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(scene, rotUni, projDistUni) {\n    var font, container, cylinderX, coneX, labelX, cylinderY, coneY, labelY, cylinderZ, coneZ, labelZ, cylinderW, coneW, labelW;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return loadFontAsync(_assets_fonts_Sarasa_Mono_SC_Bold_typeface_json__WEBPACK_IMPORTED_MODULE_2__);\n        case 2:\n          font = _context.sent;\n          container = new three__WEBPACK_IMPORTED_MODULE_3__.Group();\n          cylinderX = createAxisCylinderMesh(0, 0xff0000, rotUni, projDistUni);\n          coneX = createAxisConeMesh(0, 0xff0000, rotUni, projDistUni);\n          labelX = createAxisLabelMesh(0, 0xff0000, 'X', font, rotUni, projDistUni);\n          cylinderY = createAxisCylinderMesh(1, 0x00ff00, rotUni, projDistUni);\n          coneY = createAxisConeMesh(1, 0x00ff00, rotUni, projDistUni);\n          labelY = createAxisLabelMesh(1, 0x00ff00, 'Y', font, rotUni, projDistUni);\n          cylinderZ = createAxisCylinderMesh(2, 0x0000ff, rotUni, projDistUni);\n          coneZ = createAxisConeMesh(2, 0x0000ff, rotUni, projDistUni);\n          labelZ = createAxisLabelMesh(2, 0x0000ff, 'Z', font, rotUni, projDistUni);\n          cylinderW = createAxisCylinderMesh(3, 0xf07026, rotUni, projDistUni);\n          coneW = createAxisConeMesh(3, 0xf07026, rotUni, projDistUni);\n          labelW = createAxisLabelMesh(3, 0xf07026, 'W', font, rotUni, projDistUni);\n          container.add(cylinderX, coneX, labelX);\n          container.add(cylinderY, coneY, labelY);\n          container.add(cylinderZ, coneZ, labelZ);\n          container.add(cylinderW, coneW, labelW);\n          scene.add(container);\n          return _context.abrupt(\"return\", container);\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _createAxes.apply(this, arguments);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createAxes);\n\n//# sourceURL=webpack:///./src/axesCreater.js?");

/***/ }),

/***/ "./src/geometries.js":
/*!***************************!*\
  !*** ./src/geometries.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create4DSphereMesh: () => (/* binding */ create4DSphereMesh),\n/* harmony export */   toBufferGeometry: () => (/* binding */ toBufferGeometry)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.core.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nfunction toBufferGeometry(source) {\n  var geo = new three__WEBPACK_IMPORTED_MODULE_0__.BufferGeometry();\n  ['position', 'normal', 'uv'].forEach(function (k) {\n    return source.attributes[k] && geo.setAttribute(k, source.attributes[k].clone());\n  });\n  source.index && geo.setIndex(source.index.clone());\n  source.parameters && (geo.parameters = _objectSpread({}, source.parameters));\n  source.dispose();\n  return geo;\n}\nfunction create4DSphereMesh() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      x: 0,\n      y: 0,\n      z: 0,\n      w: 0\n    },\n    x = _ref.x,\n    y = _ref.y,\n    z = _ref.z,\n    w = _ref.w;\n  var sphereRadius = arguments.length > 1 ? arguments[1] : undefined;\n  var material = arguments.length > 2 ? arguments[2] : undefined;\n  var sphereGeometry = toBufferGeometry(new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(sphereRadius, 5, 5));\n  var vertexCount = sphereGeometry.attributes.position.count;\n  var centerArr = new Float32Array(vertexCount * 4);\n  for (var i = 0; i < vertexCount; i++) {\n    centerArr.set([x, y, z, w], i * 4);\n  }\n  sphereGeometry.setAttribute('center4D', new three__WEBPACK_IMPORTED_MODULE_0__.Float32BufferAttribute(centerArr, 4));\n  var sphere = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(sphereGeometry, material);\n  return sphere;\n}\n\n\n//# sourceURL=webpack:///./src/geometries.js?");

/***/ }),

/***/ "./src/helperFunc.js":
/*!***************************!*\
  !*** ./src/helperFunc.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeCylindersRadius: () => (/* binding */ changeCylindersRadius),\n/* harmony export */   changeMaterialProperty: () => (/* binding */ changeMaterialProperty),\n/* harmony export */   changeSpheresRadius: () => (/* binding */ changeSpheresRadius),\n/* harmony export */   disposeGroup: () => (/* binding */ disposeGroup),\n/* harmony export */   getFarthest4DPointDist: () => (/* binding */ getFarthest4DPointDist),\n/* harmony export */   getFarthestPointDist: () => (/* binding */ getFarthestPointDist)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.core.js\");\n/* harmony import */ var _geometries_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geometries.js */ \"./src/geometries.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\n\n\n\nfunction getFarthestPointDist(points) {\n  var getDist = function getDist(p) {\n    return Math.sqrt(p.x ** 2 + p.y ** 2 + p.z ** 2);\n  };\n  return getDist(points.reduce(function (farthest, point) {\n    var dist = point.x ** 2 + point.y ** 2 + point.z ** 2;\n    return dist > (farthest.dist || -1) ? {\n      point: point,\n      dist: dist\n    } : farthest;\n  }, {}).point);\n}\nfunction getFarthest4DPointDist(points) {\n  var getDist = function getDist(p) {\n    return Math.sqrt(p.x ** 2 + p.y ** 2 + p.z ** 2 + p.w ** 2);\n  };\n  return getDist(points.reduce(function (farthest, point) {\n    var dist = point.x ** 2 + point.y ** 2 + point.z ** 2 + point.w ** 2;\n    return dist > (farthest.dist || -1) ? {\n      point: point,\n      dist: dist\n    } : farthest;\n  }, {}).point);\n}\n\n// 修改材质属性\nfunction changeMaterialProperty(group, propertyName, newValue) {\n  if (!group) return;\n  group.traverse(function (child) {\n    if (child.isMesh && child.material) {\n      if (!Array.isArray(child.material)) {\n        (0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(child.material, propertyName, newValue);\n        child.material.needsUpdate = true;\n      } else {\n        var _iterator = _createForOfIteratorHelper(child.material),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var material = _step.value;\n            (0,lodash__WEBPACK_IMPORTED_MODULE_1__.set)(material, propertyName, newValue);\n            material.needsUpdate = true;\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    }\n  });\n}\n\n// 修改球体半径\nfunction changeSpheresRadius(group, newRadius) {\n  if (!group) return;\n  group.children.forEach(function (child) {\n    if (child instanceof three__WEBPACK_IMPORTED_MODULE_2__.Mesh && child.geometry instanceof three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry) {\n      child.geometry.dispose();\n      child.geometry = new three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry(newRadius, child.geometry.parameters.widthSegments, child.geometry.parameters.heightSegments);\n    } else if (child instanceof three__WEBPACK_IMPORTED_MODULE_2__.Mesh && child.geometry instanceof three__WEBPACK_IMPORTED_MODULE_2__.BufferGeometry) {\n      var centerAttr = child.geometry.getAttribute('center4D');\n      child.geometry.dispose();\n      child.geometry = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_0__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry(newRadius, child.geometry.parameters.widthSegments, child.geometry.parameters.heightSegments));\n      child.geometry.setAttribute('center4D', centerAttr);\n    }\n  });\n}\n\n// 修改圆柱半径\nfunction changeCylindersRadius(group, newRadius) {\n  if (!group) return;\n  group.traverse(function (child) {\n    if (child.isMesh && child.geometry instanceof three__WEBPACK_IMPORTED_MODULE_2__.CylinderGeometry) {\n      var oldGeo = child.geometry;\n      child.geometry.dispose();\n      child.geometry = new three__WEBPACK_IMPORTED_MODULE_2__.CylinderGeometry(newRadius, newRadius, oldGeo.parameters.height, oldGeo.parameters.radialSegments, oldGeo.parameters.heightSegments);\n    } else if (child instanceof three__WEBPACK_IMPORTED_MODULE_2__.Mesh && child.geometry instanceof three__WEBPACK_IMPORTED_MODULE_2__.BufferGeometry) {\n      var v1Attr = child.geometry.getAttribute('v1');\n      var v2Attr = child.geometry.getAttribute('v2');\n      child.geometry.dispose();\n      child.geometry = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_0__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_2__.CylinderGeometry(newRadius, newRadius, 1, child.geometry.parameters.radialSegments, child.geometry.parameters.heightSegments));\n      child.geometry.setAttribute('v1', v1Attr);\n      child.geometry.setAttribute('v2', v2Attr);\n    }\n  });\n}\n\n// 释放组\nfunction disposeGroup(group) {\n  group.traverse(function (child) {\n    if (child.isMesh) {\n      var _child$geometry, _child$material;\n      (_child$geometry = child.geometry) === null || _child$geometry === void 0 || _child$geometry.dispose();\n      (_child$material = child.material) === null || _child$material === void 0 || _child$material.dispose();\n    }\n  });\n  group.clear();\n}\n\n\n//# sourceURL=webpack:///./src/helperFunc.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.css */ \"./src/style.css\");\n/* harmony import */ var _viewer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./viewer.js */ \"./src/viewer.js\");\n\n\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/offProcessor.js":
/*!*****************************!*\
  !*** ./src/offProcessor.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decomposeSelfIntersectingPolygon: () => (/* binding */ decomposeSelfIntersectingPolygon),\n/* harmony export */   getUniqueSortedPairs: () => (/* binding */ getUniqueSortedPairs),\n/* harmony export */   parseOFF: () => (/* binding */ parseOFF),\n/* harmony export */   processMeshData: () => (/* binding */ processMeshData)\n/* harmony export */ });\n/* harmony import */ var poly2tri__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! poly2tri */ \"./node_modules/poly2tri/src/poly2tri.js\");\n/* harmony import */ var poly2tri__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(poly2tri__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var polygon_clipping__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! polygon-clipping */ \"./node_modules/polygon-clipping/dist/polygon-clipping.umd.js\");\n/* harmony import */ var polygon_clipping__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(polygon_clipping__WEBPACK_IMPORTED_MODULE_1__);\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\n\n\nfunction decomposeSelfIntersectingPolygon(originalPoints) {\n  var coords = originalPoints.map(function (p) {\n    return [+p.x.toFixed(6), +p.y.toFixed(6)];\n  });\n  if (coords.length > 0) {\n    coords.push([coords[0][0], coords[0][1]]);\n  }\n  var result = polygon_clipping__WEBPACK_IMPORTED_MODULE_1__.union([coords]);\n  var decomposed = [];\n  var _iterator = _createForOfIteratorHelper(result),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var polygon = _step.value;\n      var _iterator2 = _createForOfIteratorHelper(polygon),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var ring = _step2.value;\n          if (ring.length === 0) continue;\n          var ringPoints = ring.slice(0, -1);\n          var points = ringPoints.map(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n              x = _ref2[0],\n              y = _ref2[1];\n            return new poly2tri__WEBPACK_IMPORTED_MODULE_0__.Point(x, y);\n          });\n          decomposed.push(points);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return decomposed;\n}\nfunction parseOFF(data) {\n  var lines = data.split('\\n').filter(function (line) {\n    return line.trim() !== '' && !line.startsWith('#');\n  });\n  if (lines[0].trim() !== 'OFF') throw new Error('Invalid OFF file format');\n  var _lines$1$trim$split$m = lines[1].trim().split(/\\s+/).map(Number),\n    _lines$1$trim$split$m2 = _slicedToArray(_lines$1$trim$split$m, 2),\n    nVertices = _lines$1$trim$split$m2[0],\n    nFaces = _lines$1$trim$split$m2[1];\n  var vertices = [];\n  for (var i = 0; i < nVertices; i++) {\n    var _lines$trim$split$map = lines[i + 2].trim().split(/\\s+/).map(parseFloat),\n      _lines$trim$split$map2 = _slicedToArray(_lines$trim$split$map, 3),\n      x = _lines$trim$split$map2[0],\n      y = _lines$trim$split$map2[1],\n      z = _lines$trim$split$map2[2];\n    vertices.push({\n      x: x,\n      y: y,\n      z: z\n    });\n  }\n  var faces = [];\n  for (var _i = 0; _i < nFaces; _i++) {\n    var parts = lines[_i + 2 + nVertices].trim().split(/\\s+/);\n    var count = parseInt(parts[0]);\n    faces.push(parts.slice(1, count + 1).map(Number));\n  }\n  return {\n    vertices: vertices,\n    faces: faces\n  };\n}\nfunction computeNormal(points) {\n  var v1 = {\n    x: points[1].x - points[0].x,\n    y: points[1].y - points[0].y,\n    z: points[1].z - points[0].z\n  };\n  var v2 = {\n    x: points[2].x - points[0].x,\n    y: points[2].y - points[0].y,\n    z: points[2].z - points[0].z\n  };\n  var nx = v1.y * v2.z - v1.z * v2.y;\n  var ny = v1.z * v2.x - v1.x * v2.z;\n  var nz = v1.x * v2.y - v1.y * v2.x;\n  var length = Math.sqrt(nx ** 2 + ny ** 2 + nz ** 2);\n  return {\n    x: nx / length,\n    y: ny / length,\n    z: nz / length\n  };\n}\nfunction rotatePoint(p, theta, phi) {\n  var cosT = Math.cos(theta),\n    sinT = Math.sin(theta);\n  var cosP = Math.cos(phi),\n    sinP = Math.sin(phi);\n  var y1 = p.y * cosT - p.z * sinT;\n  var z1 = p.y * sinT + p.z * cosT;\n  var x2 = p.x * cosP + z1 * sinP;\n  var z2 = -p.x * sinP + z1 * cosP;\n  return {\n    x: x2,\n    y: y1,\n    z: z2,\n    orig: p\n  };\n}\nfunction inverseRotatePoint(p, theta, phi) {\n  var cosT = Math.cos(-theta),\n    sinT = Math.sin(-theta);\n  var cosP = Math.cos(-phi),\n    sinP = Math.sin(-phi);\n  var x1 = p.x * cosP + p.z * sinP;\n  var z1 = -p.x * sinP + p.z * cosP;\n  var y2 = p.y * cosT - z1 * sinT;\n  var z2 = p.y * sinT + z1 * cosT;\n  return {\n    x: x1,\n    y: y2,\n    z: z2\n  };\n}\nfunction rotateToXY(points) {\n  var normal = computeNormal(points);\n  var theta = Math.atan2(normal.y, normal.z);\n  var phi = Math.atan2(-normal.x, Math.sqrt(normal.y ** 2 + normal.z ** 2));\n  var rotated = points.map(function (p) {\n    return rotatePoint(p, theta, phi);\n  });\n  return {\n    rotated: rotated,\n    theta: theta,\n    phi: phi,\n    z: rotated[0].z\n  };\n}\nfunction arePointsClose(point1, point2) {\n  var epsilon = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.EPSILON;\n  var dx = Math.abs(point1.x - point2.x);\n  var dy = Math.abs(point1.y - point2.y);\n  var dz = Math.abs(point1.z - point2.z);\n  return dx <= epsilon && dy <= epsilon && dz <= epsilon;\n}\nfunction getUniqueSortedPairs(arrays) {\n  var pairs = arrays.flatMap(function (arr) {\n    return arr.map(function (v, i) {\n      return [Math.min(v, arr[(i + 1) % arr.length]), Math.max(v, arr[(i + 1) % arr.length])];\n    });\n  });\n  return _toConsumableArray(new Set(pairs.map(JSON.stringify))).map(JSON.parse);\n}\nfunction processMeshData(_ref3) {\n  var vertices = _ref3.vertices,\n    faces = _ref3.faces;\n  var processedVertices = _toConsumableArray(vertices);\n  var processedFaces = [];\n  var edges = getUniqueSortedPairs(faces).map(function (edge) {\n    return edge.map(function (index) {\n      return vertices[index];\n    });\n  });\n  faces.forEach(function (face) {\n    if (face.length === 3) {\n      processedFaces.push(face);\n      return;\n    }\n    var faceVertices = face.map(function (idx) {\n      return vertices[idx];\n    });\n    function triangulateFace(vertices3D) {\n      var _rotateToXY = rotateToXY(vertices3D),\n        rotated = _rotateToXY.rotated,\n        theta = _rotateToXY.theta,\n        phi = _rotateToXY.phi,\n        z = _rotateToXY.z;\n      var contour = rotated.map(function (p) {\n        return new poly2tri__WEBPACK_IMPORTED_MODULE_0__.Point(p.x, p.y);\n      });\n      var triangles = [];\n      var decomposed = decomposeSelfIntersectingPolygon(contour);\n      var _iterator3 = _createForOfIteratorHelper(decomposed),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var subPolygon = _step3.value;\n          var swctx = new poly2tri__WEBPACK_IMPORTED_MODULE_0__.SweepContext(subPolygon);\n          swctx.triangulate();\n          var subTriangles = swctx.getTriangles().map(function (triangle) {\n            return triangle.getPoints().map(function (pt) {\n              pt.z = z;\n              var origPoint = inverseRotatePoint(pt, theta, phi);\n              var origIndex = processedVertices.findIndex(function (p) {\n                return arePointsClose(p, origPoint);\n              });\n              if (origIndex > -1) return origIndex;\n              processedVertices.push(origPoint);\n              return processedVertices.length - 1;\n            });\n          });\n          triangles.push.apply(triangles, _toConsumableArray(subTriangles));\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return triangles;\n    }\n    var triangles = triangulateFace(faceVertices);\n    triangles.forEach(function (t) {\n      if (t.length === 3) processedFaces.push(t);\n    });\n  });\n  return {\n    vertices: processedVertices,\n    faces: processedFaces,\n    edges: edges\n  };\n}\n\n\n//# sourceURL=webpack:///./src/offProcessor.js?");

/***/ }),

/***/ "./src/offProcessor4D.js":
/*!*******************************!*\
  !*** ./src/offProcessor4D.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parse4OFF: () => (/* binding */ parse4OFF),\n/* harmony export */   process4DMeshData: () => (/* binding */ process4DMeshData)\n/* harmony export */ });\n/* harmony import */ var _offProcessor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./offProcessor.js */ \"./src/offProcessor.js\");\n/* harmony import */ var poly2tri__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! poly2tri */ \"./node_modules/poly2tri/src/poly2tri.js\");\n/* harmony import */ var poly2tri__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(poly2tri__WEBPACK_IMPORTED_MODULE_1__);\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\n\n\nfunction rotate4DPointsToXY(points) {\n  // 1. 提取前三个点\n  var p0 = points[0];\n  var p1 = points[1];\n  var p2 = points[2];\n\n  // 2. 计算向量u和v\n  var u = [p1.x - p0.x, p1.y - p0.y, p1.z - p0.z, p1.w - p0.w];\n  var v = [p2.x - p0.x, p2.y - p0.y, p2.z - p0.z, p2.w - p0.w];\n\n  // 3. 归一化u得到q1\n  var normU = Math.sqrt(u.reduce(function (sum, val) {\n    return sum + val * val;\n  }, 0));\n  if (normU < 1e-10) throw new Error('Vector u is too small');\n  var q1 = u.map(function (x) {\n    return x / normU;\n  });\n\n  // 4. 计算v在u上的投影并正交化\n  var dotUV = v.reduce(function (sum, val, i) {\n    return sum + val * u[i];\n  }, 0);\n  var projUV = u.map(function (x) {\n    return dotUV / (normU * normU) * x;\n  });\n  var vOrtho = v.map(function (val, i) {\n    return val - projUV[i];\n  });\n  var normVOrtho = Math.sqrt(vOrtho.reduce(function (sum, val) {\n    return sum + val * val;\n  }, 0));\n  if (normVOrtho < 1e-10) throw new Error('Vectors are linearly dependent');\n  var q2 = vOrtho.map(function (x) {\n    return x / normVOrtho;\n  });\n\n  // 5. 构造与q1,q2正交的基向量\n  var basis = [q1, q2];\n  var orthoVecs = [];\n  var stdBasis = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n  var _loop = function _loop() {\n    var e = _stdBasis[_i];\n    var vec = _toConsumableArray(e);\n    var _loop2 = function _loop2() {\n      var b = _basis[_i2];\n      var dot = vec.reduce(function (sum, val, i) {\n        return sum + val * b[i];\n      }, 0);\n      vec = vec.map(function (val, i) {\n        return val - dot * b[i];\n      });\n    };\n    for (var _i2 = 0, _basis = basis; _i2 < _basis.length; _i2++) {\n      _loop2();\n    }\n    var norm = Math.sqrt(vec.reduce(function (sum, val) {\n      return sum + val * val;\n    }, 0));\n    if (norm > 1e-6) {\n      orthoVecs.push(vec.map(function (x) {\n        return x / norm;\n      }));\n      basis.push(vec.map(function (x) {\n        return x / norm;\n      }));\n      if (orthoVecs.length >= 2) return 1; // break\n    }\n  };\n  for (var _i = 0, _stdBasis = stdBasis; _i < _stdBasis.length; _i++) {\n    if (_loop()) break;\n  }\n  if (orthoVecs.length < 2) throw new Error('Failed to find orthogonal basis');\n  var q3 = orthoVecs[0],\n    q4 = orthoVecs[1];\n\n  // 6. 构造旋转矩阵（行向量为q1, q2, q3, q4）\n  var rotationMatrix = [q1, q2, q3, q4];\n\n  // 7. 应用旋转矩阵\n  var rotatedPoints = points.map(function (p) {\n    return apply4DMatrix(p, rotationMatrix);\n  });\n\n  // 8. 提取结果\n  var firstRotated = rotatedPoints[0];\n  return {\n    rotated: rotatedPoints,\n    rotationMatrix: rotationMatrix,\n    z: firstRotated.z,\n    w: firstRotated.w\n  };\n}\nfunction apply4DMatrix(point, matrix) {\n  var vec = [point.x, point.y, point.z, point.w];\n  var transformed = [matrix[0][0] * vec[0] + matrix[0][1] * vec[1] + matrix[0][2] * vec[2] + matrix[0][3] * vec[3], matrix[1][0] * vec[0] + matrix[1][1] * vec[1] + matrix[1][2] * vec[2] + matrix[1][3] * vec[3], matrix[2][0] * vec[0] + matrix[2][1] * vec[1] + matrix[2][2] * vec[2] + matrix[2][3] * vec[3], matrix[3][0] * vec[0] + matrix[3][1] * vec[1] + matrix[3][2] * vec[2] + matrix[3][3] * vec[3]];\n  return {\n    x: transformed[0],\n    y: transformed[1],\n    z: transformed[2],\n    w: transformed[3]\n  };\n}\nfunction apply4DInverseRotation(rotatedPoint, rotationMatrix) {\n  // 计算旋转矩阵的逆矩阵（转置矩阵，因为旋转矩阵是正交矩阵）\n  var inverseRotation = [[rotationMatrix[0][0], rotationMatrix[1][0], rotationMatrix[2][0], rotationMatrix[3][0]], [rotationMatrix[0][1], rotationMatrix[1][1], rotationMatrix[2][1], rotationMatrix[3][1]], [rotationMatrix[0][2], rotationMatrix[1][2], rotationMatrix[2][2], rotationMatrix[3][2]], [rotationMatrix[0][3], rotationMatrix[1][3], rotationMatrix[2][3], rotationMatrix[3][3]]];\n  return apply4DMatrix(rotatedPoint, inverseRotation);\n}\nfunction parse4OFF(data) {\n  var lines = data.split('\\n').filter(function (line) {\n    return line.trim() !== '' && !line.startsWith('#');\n  });\n  if (lines[0].trim() !== '4OFF') throw new Error('Invalid 4OFF file format');\n  var _lines$1$trim$split$m = lines[1].trim().split(/\\s+/).map(Number),\n    _lines$1$trim$split$m2 = _slicedToArray(_lines$1$trim$split$m, 4),\n    nVertices = _lines$1$trim$split$m2[0],\n    nFaces = _lines$1$trim$split$m2[1],\n    nCells = _lines$1$trim$split$m2[3];\n  var vertices = [];\n  for (var i = 0; i < nVertices; i++) {\n    var _lines$trim$split$map = lines[i + 2].trim().split(/\\s+/).map(parseFloat),\n      _lines$trim$split$map2 = _slicedToArray(_lines$trim$split$map, 4),\n      x = _lines$trim$split$map2[0],\n      y = _lines$trim$split$map2[1],\n      z = _lines$trim$split$map2[2],\n      w = _lines$trim$split$map2[3];\n    vertices.push({\n      x: x,\n      y: y,\n      z: z,\n      w: w\n    });\n  }\n  var faces = [];\n  for (var _i3 = 0; _i3 < nFaces; _i3++) {\n    var parts = lines[_i3 + 2 + nVertices].trim().split(/\\s+/);\n    var count = parseInt(parts[0]);\n    faces.push(parts.slice(1, count + 1).map(Number));\n  }\n  var cells = [];\n  for (var _i4 = 0; _i4 < nCells; _i4++) {\n    var _parts = lines[_i4 + 2 + nVertices + nFaces].trim().split(/\\s+/);\n    var _count = parseInt(_parts[0]);\n    cells.push(_parts.slice(1, _count + 1).map(Number));\n  }\n  return {\n    vertices: vertices,\n    faces: faces,\n    cells: cells\n  };\n}\nfunction are4DPointsClose(point1, point2) {\n  var epsilon = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.EPSILON;\n  var dx = Math.abs(point1.x - point2.x);\n  var dy = Math.abs(point1.y - point2.y);\n  var dz = Math.abs(point1.z - point2.z);\n  var dw = Math.abs(point1.w - point2.w);\n  return dx <= epsilon && dy <= epsilon && dz <= epsilon && dw <= epsilon;\n}\nfunction range(start, stop) {\n  var length = Math.max(stop - start + 1, 0);\n  return Array.from({\n    length: length\n  }, function (_, i) {\n    return start + i;\n  });\n}\nfunction process4DMeshData(_ref) {\n  var vertices = _ref.vertices,\n    faces = _ref.faces,\n    cells = _ref.cells;\n  var processedVertices = _toConsumableArray(vertices);\n  var processedFaces = [];\n  var processedCells = [];\n  var edges = (0,_offProcessor_js__WEBPACK_IMPORTED_MODULE_0__.getUniqueSortedPairs)(faces).map(function (edge) {\n    return edge.map(function (index) {\n      return vertices[index];\n    });\n  });\n  var facesMap = {};\n  faces.forEach(function (face, faceIndex) {\n    if (face.length === 3) {\n      processedFaces.push(face);\n      return;\n    }\n    var faceVertices = face.map(function (idx) {\n      return vertices[idx];\n    });\n    function triangulateFace(vertices4D) {\n      var _rotate4DPointsToXY = rotate4DPointsToXY(vertices4D),\n        rotated = _rotate4DPointsToXY.rotated,\n        rotationMatrix = _rotate4DPointsToXY.rotationMatrix,\n        z = _rotate4DPointsToXY.z,\n        w = _rotate4DPointsToXY.w;\n      var contour = rotated.map(function (p) {\n        return new poly2tri__WEBPACK_IMPORTED_MODULE_1__.Point(p.x, p.y);\n      });\n      var triangles = [];\n      var decomposed = (0,_offProcessor_js__WEBPACK_IMPORTED_MODULE_0__.decomposeSelfIntersectingPolygon)(contour);\n      var _iterator = _createForOfIteratorHelper(decomposed),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var subPolygon = _step.value;\n          var swctx = new poly2tri__WEBPACK_IMPORTED_MODULE_1__.SweepContext(subPolygon);\n          swctx.triangulate();\n          var subTriangles = swctx.getTriangles().map(function (triangle) {\n            return triangle.getPoints().map(function (pt) {\n              pt.z = z;\n              pt.w = w;\n              var origPoint = apply4DInverseRotation(pt, rotationMatrix);\n              var origIndex = processedVertices.findIndex(function (p) {\n                return are4DPointsClose(p, origPoint);\n              });\n              if (origIndex > -1) return origIndex;\n              processedVertices.push(origPoint);\n              return processedVertices.length - 1;\n            });\n          });\n          triangles.push.apply(triangles, _toConsumableArray(subTriangles));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return triangles;\n    }\n    var trianglesForFaceStartIndex = processedFaces.length;\n    var triangles = triangulateFace(faceVertices);\n    triangles.forEach(function (t) {\n      if (t.length === 3) processedFaces.push(t);\n    });\n    var trianglesForFaceEndIndex = processedFaces.length - 1;\n    facesMap[faceIndex] = [trianglesForFaceStartIndex, trianglesForFaceEndIndex];\n  });\n  var _iterator2 = _createForOfIteratorHelper(cells),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var cell = _step2.value;\n      var processedCell = [];\n      var _iterator3 = _createForOfIteratorHelper(cell),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var face = _step3.value;\n          processedCell.push.apply(processedCell, _toConsumableArray(range.apply(void 0, _toConsumableArray(facesMap[face]))));\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      processedCells.push(processedCell);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return {\n    vertices: processedVertices,\n    faces: processedFaces,\n    edges: edges,\n    cells: processedCells\n  };\n}\n\n\n//# sourceURL=webpack:///./src/offProcessor4D.js?");

/***/ }),

/***/ "./src/shaderCompCallback.js":
/*!***********************************!*\
  !*** ./src/shaderCompCallback.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _GLSLs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GLSLs.js */ \"./src/GLSLs.js\");\n\nfunction sphereMaterial(material, rotUni, projDistUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    material.userData.projectionDistance = shader.uniforms.projectionDistance;\n    material.userData.rotation4D = shader.uniforms.rotation4D;\n    shader.vertexShader = \"\\n      attribute vec4 center4D;\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create4DRotationMat, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rotationArrUni, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      vec3 center3D = schlegelProjection(create4DRotationMat(rotation4D) * center4D);\\n      transformed = transformed + center3D;\\n      \");\n  };\n  return material;\n}\nfunction cylinderMaterial(material, rotUni, projDistUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    material.userData.projectionDistance = shader.uniforms.projectionDistance;\n    material.userData.rotation4D = shader.uniforms.rotation4D;\n    shader.vertexShader = \"\\n      attribute vec4 v1;\\n      attribute vec4 v2;\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create4DRotationMat, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rotationArrUni, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      mat4 rotMat = create4DRotationMat(rotation4D);\\n      vec3 pv1 = schlegelProjection(rotMat * v1);\\n      vec3 pv2 = schlegelProjection(rotMat * v2);\\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), pv1, pv2);\\n      \");\n  };\n  return material;\n}\nfunction faceMaterial(material, rotUni, projDistUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    material.userData.projectionDistance = shader.uniforms.projectionDistance;\n    material.userData.rotation4D = shader.uniforms.rotation4D;\n    shader.vertexShader = \"\\n      attribute vec4 position4D;\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create4DRotationMat, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rotationArrUni, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      vec4 rotatedPosition4D = create4DRotationMat(rotation4D) * position4D;\\n      transformed = schlegelProjection(rotatedPosition4D);\\n      \");\n  };\n  return material;\n}\nfunction axisMaterial(material, rotUni, projDistUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    shader.vertexShader = \"\\n      attribute uint axis;\\n      attribute float len;\\n      \\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create4DRotationMat, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rotationArrUni, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      vec4 v = vec4(0.0, 0.0, 0.0, 0.0);\\n      if (axis == 0u) v.x = projectionDistance / 2.0;\\n      else if (axis == 1u) v.y = projectionDistance / 2.0;\\n      else if (axis == 2u) v.z = projectionDistance / 2.0;\\n      else if (axis == 3u) v.w = projectionDistance / 2.0;\\n      \\n      vec3 vProj = schlegelProjection(create4DRotationMat(rotation4D) * v);\\n      float s = length(vProj) / length(v);\\n      float scale = len / length(vProj) * s;\\n      vProj *= scale;\\n      \\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), -vProj, vProj);\\n      \");\n  };\n  return material;\n}\nfunction axisConeMaterial(material, rotUni, projDistUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    material.userData.projectionDistance = shader.uniforms.projectionDistance;\n    material.userData.rotation4D = shader.uniforms.rotation4D;\n    shader.vertexShader = \"\\n      attribute uint axis;\\n      attribute float len;\\n      attribute float height;\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create4DRotationMat, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rotationArrUni, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      vec4 v = vec4(0.0, 0.0, 0.0, 0.0);\\n      if (axis == 0u) v.x = projectionDistance / 2.0;\\n      else if (axis == 1u) v.y = projectionDistance / 2.0;\\n      else if (axis == 2u) v.z = projectionDistance / 2.0;\\n      else if (axis == 3u) v.w = projectionDistance / 2.0;\\n      \\n      vec3 vProj = schlegelProjection(create4DRotationMat(rotation4D) * v);\\n      float s = length(vProj) / length(v);\\n      float scale1 = len / length(vProj) * s;\\n      float scale2 = (len * s + height) / length(vProj);\\n      vec3 vProj1 = vProj * scale1;\\n      vec3 vProj2 = vProj * scale2;\\n      \\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), vProj1, vProj2);\\n      \");\n  };\n  return material;\n}\nfunction axisLabelMaterial(material, rotUni, projDistUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    material.userData.projectionDistance = shader.uniforms.projectionDistance;\n    material.userData.rotation4D = shader.uniforms.rotation4D;\n    shader.vertexShader = \"\\n      attribute uint axis;\\n      attribute float len;\\n      attribute float offset;\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create4DRotationMat, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rotationArrUni, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      vec4 v = vec4(0.0, 0.0, 0.0, 0.0);\\n      if (axis == 0u) v.x = projectionDistance / 2.0;\\n      else if (axis == 1u) v.y = projectionDistance / 2.0;\\n      else if (axis == 2u) v.z = projectionDistance / 2.0;\\n      else if (axis == 3u) v.w = projectionDistance / 2.0;\\n      \\n      vec3 vProj = schlegelProjection(create4DRotationMat(rotation4D) * v);\\n      float s = length(vProj) / length(v);\\n      float scale1 = (len * s + offset) / length(vProj);\\n      float scale2 = (len * s + offset + 1.0) / length(vProj);\\n      vec3 vProj1 = vProj * scale1;\\n      vec3 vProj2 = vProj * scale2;\\n      \\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), vProj1, vProj2);\\n      \");\n  };\n  return material;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  sphereMaterial: sphereMaterial,\n  cylinderMaterial: cylinderMaterial,\n  faceMaterial: faceMaterial,\n  axisMaterial: axisMaterial,\n  axisConeMaterial: axisConeMaterial,\n  axisLabelMaterial: axisLabelMaterial\n});\n\n//# sourceURL=webpack:///./src/shaderCompCallback.js?");

/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./style.css */ \"./node_modules/css-loader/dist/cjs.js!./src/style.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack:///./src/style.css?");

/***/ }),

/***/ "./src/viewer.js":
/*!***********************!*\
  !*** ./src/viewer.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.core.js\");\n/* harmony import */ var three_addons_controls_TrackballControls_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! three/addons/controls/TrackballControls.js */ \"./node_modules/three/examples/jsm/controls/TrackballControls.js\");\n/* harmony import */ var _axesCreater_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./axesCreater.js */ \"./src/axesCreater.js\");\n/* harmony import */ var _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shaderCompCallback.js */ \"./src/shaderCompCallback.js\");\n/* harmony import */ var _helperFunc_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helperFunc.js */ \"./src/helperFunc.js\");\n/* harmony import */ var _geometries_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometries.js */ \"./src/geometries.js\");\n/* harmony import */ var _offProcessor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./offProcessor.js */ \"./src/offProcessor.js\");\n/* harmony import */ var _offProcessor4D_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./offProcessor4D.js */ \"./src/offProcessor4D.js\");\n/* harmony import */ var _assets_models_tri_off__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../assets/models/tri.off */ \"./assets/models/tri.off\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\n\n\n\nvar faceVisibleSwitcher = document.getElementById('faceVisibleSwitcher');\nvar wireframeVisibleSwitcher = document.getElementById('wireframeVisibleSwitcher');\nvar verticesVisibleSwitcher = document.getElementById('verticesVisibleSwitcher');\nvar axisVisibleSwitcher = document.getElementById('axisVisibleSwitcher');\nvar perspSwitcher = document.getElementById('perspSwitcher');\nvar facesOpacitySlider = document.getElementById('facesOpacitySlider');\nvar wireframeAndVerticesDimSlider = document.getElementById('wireframeAndVerticesDimSlider');\nvar projectionDistanceSlider = document.getElementById('projectionDistanceSlider');\nvar fileInput = document.getElementById('fileInput');\nvar rotationSliders = ['XY', 'XZ', 'XW', 'YZ', 'YW', 'ZW'].map(function (i) {\n  return document.getElementById(\"rot\".concat(i, \"Slider\"));\n});\nvar rotUni = {\n  value: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\n};\nvar projDistUni = {\n  value: 2.0\n};\nvar scaleFactor, axesGroup, solidGroup, facesGroup, wireframeGroup, verticesGroup;\nvar is4D = false;\n\n// 初始化渲染器\nvar dpr = window.devicePixelRatio || 1;\nvar canvas = document.getElementById('polyhedronRenderer');\nvar renderer = new three__WEBPACK_IMPORTED_MODULE_7__.WebGLRenderer({\n  antialias: true,\n  powerPreference: 'high-performance',\n  canvas: canvas\n});\nvar maxSize = Math.min(Math.min(window.innerWidth, window.innerHeight) - 16, 720);\nrenderer.setSize(maxSize * dpr, maxSize * dpr, false);\ncanvas.style.width = \"\".concat(maxSize, \"px\");\ncanvas.style.height = \"\".concat(maxSize, \"px\");\ncanvas.style.display = 'block';\nwindow.addEventListener('resize', function () {\n  var newMaxSize = Math.min(Math.min(window.innerWidth, window.innerHeight) - 16, 720);\n  renderer.setSize(newMaxSize * dpr, newMaxSize * dpr, false);\n  canvas.style.width = \"\".concat(newMaxSize, \"px\");\n  canvas.style.height = \"\".concat(newMaxSize, \"px\");\n});\n\n// 添加场景\nvar scene = new three__WEBPACK_IMPORTED_MODULE_8__.Scene();\nscene.background = new three__WEBPACK_IMPORTED_MODULE_8__.Color(0x111111);\n\n// 配置摄像头\nvar cameraPersp = new three__WEBPACK_IMPORTED_MODULE_8__.PerspectiveCamera(60, 1.0, 0.01, 500);\nvar cameraOrtho = new three__WEBPACK_IMPORTED_MODULE_8__.OrthographicCamera(-60, 60, 60, -60, 0.01, 500);\ncameraPersp.position.set(0, 0, 120);\ncameraOrtho.position.set(0, 0, 120);\nvar camera = cameraPersp.clone();\n\n// 配置控制器\nvar controls = new three_addons_controls_TrackballControls_js__WEBPACK_IMPORTED_MODULE_9__.TrackballControls(camera, renderer.domElement);\ncontrols.dynamicDampingFactor = 0.8;\ncontrols.rotateSpeed = 4.0;\ncontrols.maxDistance = 150.0;\ncontrols.minDistance = 0.1;\n\n// 渲染循环\nrenderer.setAnimationLoop(render);\nfunction render() {\n  controls.update();\n  renderer.render(scene, camera);\n}\n_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n  return _regeneratorRuntime().wrap(function _callee$(_context) {\n    while (1) switch (_context.prev = _context.next) {\n      case 0:\n        _context.next = 2;\n        return (0,_axesCreater_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(scene, rotUni, projDistUni);\n      case 2:\n        axesGroup = _context.sent;\n      case 3:\n      case \"end\":\n        return _context.stop();\n    }\n  }, _callee);\n}))();\n\n// 添加光源\nvar directionalLight = new three__WEBPACK_IMPORTED_MODULE_8__.DirectionalLight(0xffffff);\ndirectionalLight.position.set(0.5, 0.6, 0.4).normalize();\ndirectionalLight.intensity = 7;\ndirectionalLight.castShadow = true;\ndirectionalLight.shadow.mapSize.width = 2048;\ndirectionalLight.shadow.mapSize.height = 2048;\nscene.add(directionalLight);\nvar ambientLight = new three__WEBPACK_IMPORTED_MODULE_8__.AmbientLight(0x222222);\nambientLight.intensity = 100;\nscene.add(ambientLight);\nvar backLight = new three__WEBPACK_IMPORTED_MODULE_8__.DirectionalLight(0xddddea, 0.9);\nbackLight.intensity = 8;\nbackLight.position.set(-0.5, -0.6, -0.4).normalize();\nbackLight.castShadow = true;\nbackLight.shadow.mapSize.width = 2048;\nbackLight.shadow.mapSize.height = 2048;\nscene.add(backLight);\n\n// 创建边和顶点\nfunction createWireframeAndVertices(edges) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref2$cylinderRadius = _ref2.cylinderRadius,\n    cylinderRadius = _ref2$cylinderRadius === void 0 ? 1 : _ref2$cylinderRadius,\n    _ref2$sphereRadiusMul = _ref2.sphereRadiusMultiplier,\n    sphereRadiusMultiplier = _ref2$sphereRadiusMul === void 0 ? 2 : _ref2$sphereRadiusMul,\n    cylinderMaterial = _ref2.cylinderMaterial,\n    sphereMaterial = _ref2.sphereMaterial,\n    _ref2$cylinderColor = _ref2.cylinderColor,\n    cylinderColor = _ref2$cylinderColor === void 0 ? 0xc0c0c0 : _ref2$cylinderColor,\n    _ref2$sphereColor = _ref2.sphereColor,\n    sphereColor = _ref2$sphereColor === void 0 ? 0xffd700 : _ref2$sphereColor;\n  var defaultCylinderMaterial = cylinderMaterial || new three__WEBPACK_IMPORTED_MODULE_8__.MeshStandardMaterial({\n    color: cylinderColor,\n    metalness: 1.0,\n    roughness: 0.4\n  });\n  var defaultSphereMaterial = sphereMaterial || new three__WEBPACK_IMPORTED_MODULE_8__.MeshStandardMaterial({\n    color: sphereColor,\n    metalness: 1.0,\n    roughness: 0.5\n  });\n  var wireframeGroup = new three__WEBPACK_IMPORTED_MODULE_8__.Group();\n  var verticesGroup = new three__WEBPACK_IMPORTED_MODULE_8__.Group();\n  var uniquePoints = new Set();\n  var sphereRadius = cylinderRadius * sphereRadiusMultiplier;\n  edges.forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      start = _ref4[0],\n      end = _ref4[1];\n    var startKey = \"\".concat(start.x, \",\").concat(start.y, \",\").concat(start.z);\n    var endKey = \"\".concat(end.x, \",\").concat(end.y, \",\").concat(end.z);\n    var startVec = new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(start.x, start.y, start.z);\n    var endVec = new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(end.x, end.y, end.z);\n    var direction = new three__WEBPACK_IMPORTED_MODULE_8__.Vector3().subVectors(endVec, startVec);\n    var length = direction.length();\n    var cylinder = new three__WEBPACK_IMPORTED_MODULE_8__.Mesh(new three__WEBPACK_IMPORTED_MODULE_8__.CylinderGeometry(cylinderRadius, cylinderRadius, length, 8, 1, false), defaultCylinderMaterial);\n    cylinder.quaternion.setFromUnitVectors(new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(0, 1, 0), direction.clone().normalize());\n    cylinder.position.copy(new three__WEBPACK_IMPORTED_MODULE_8__.Vector3().addVectors(startVec, endVec).multiplyScalar(0.5));\n    wireframeGroup.add(cylinder);\n    if (!uniquePoints.has(startKey)) {\n      var sphere = new three__WEBPACK_IMPORTED_MODULE_8__.Mesh(new three__WEBPACK_IMPORTED_MODULE_8__.SphereGeometry(sphereRadius, 16, 16), defaultSphereMaterial);\n      sphere.position.copy(startVec);\n      verticesGroup.add(sphere);\n      uniquePoints.add(startKey);\n    }\n    if (!uniquePoints.has(endKey)) {\n      var _sphere = new three__WEBPACK_IMPORTED_MODULE_8__.Mesh(new three__WEBPACK_IMPORTED_MODULE_8__.SphereGeometry(sphereRadius, 16, 16), defaultSphereMaterial);\n      _sphere.position.copy(endVec);\n      verticesGroup.add(_sphere);\n      uniquePoints.add(endKey);\n    }\n  });\n  return {\n    wireframeGroup: wireframeGroup,\n    verticesGroup: verticesGroup\n  };\n}\nfunction create4DWireframeAndVertices(edges) {\n  var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref5$cylinderRadius = _ref5.cylinderRadius,\n    cylinderRadius = _ref5$cylinderRadius === void 0 ? 1 : _ref5$cylinderRadius,\n    _ref5$sphereRadiusMul = _ref5.sphereRadiusMultiplier,\n    sphereRadiusMultiplier = _ref5$sphereRadiusMul === void 0 ? 2 : _ref5$sphereRadiusMul,\n    cylinderMaterial = _ref5.cylinderMaterial,\n    sphereMaterial = _ref5.sphereMaterial,\n    _ref5$cylinderColor = _ref5.cylinderColor,\n    cylinderColor = _ref5$cylinderColor === void 0 ? 0xc0c0c0 : _ref5$cylinderColor,\n    _ref5$sphereColor = _ref5.sphereColor,\n    sphereColor = _ref5$sphereColor === void 0 ? 0xffd700 : _ref5$sphereColor;\n  var defaultCylinderMaterial = cylinderMaterial || new three__WEBPACK_IMPORTED_MODULE_8__.MeshStandardMaterial({\n    color: cylinderColor,\n    metalness: 1.0,\n    roughness: 0.4\n  });\n  var defaultSphereMaterial = sphereMaterial || new three__WEBPACK_IMPORTED_MODULE_8__.MeshStandardMaterial({\n    color: sphereColor,\n    metalness: 1.0,\n    roughness: 0.5\n  });\n  defaultCylinderMaterial = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].cylinderMaterial(defaultCylinderMaterial, rotUni, projDistUni);\n  defaultSphereMaterial = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sphereMaterial(defaultSphereMaterial, rotUni, projDistUni);\n  var wireframeGroup = new three__WEBPACK_IMPORTED_MODULE_8__.Group();\n  var verticesGroup = new three__WEBPACK_IMPORTED_MODULE_8__.Group();\n  var uniquePoints = new Set();\n  var sphereRadius = cylinderRadius * sphereRadiusMultiplier;\n  edges.forEach(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n      start = _ref7[0],\n      end = _ref7[1];\n    var startKey = \"\".concat(start.x, \",\").concat(start.y, \",\").concat(start.z, \",\").concat(start.w);\n    var endKey = \"\".concat(end.x, \",\").concat(end.y, \",\").concat(end.z, \",\").concat(end.w);\n    var x1 = start.x,\n      y1 = start.y,\n      z1 = start.z,\n      w1 = start.w;\n    var x2 = end.x,\n      y2 = end.y,\n      z2 = end.z,\n      w2 = end.w;\n    var geometry = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_3__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_8__.CylinderGeometry(cylinderRadius, cylinderRadius, 1, 5));\n    var vertexCount = geometry.attributes.position.count;\n    var v1Arr = new Float32Array(vertexCount * 4);\n    var v2Arr = new Float32Array(vertexCount * 4);\n    for (var i = 0; i < vertexCount; i++) {\n      v1Arr.set([x1, y1, z1, w1], i * 4);\n      v2Arr.set([x2, y2, z2, w2], i * 4);\n    }\n    geometry.setAttribute('v1', new three__WEBPACK_IMPORTED_MODULE_8__.Float32BufferAttribute(v1Arr, 4));\n    geometry.setAttribute('v2', new three__WEBPACK_IMPORTED_MODULE_8__.Float32BufferAttribute(v2Arr, 4));\n    var cylinder = new three__WEBPACK_IMPORTED_MODULE_8__.Mesh(geometry, defaultCylinderMaterial);\n    wireframeGroup.add(cylinder);\n    if (!uniquePoints.has(startKey)) {\n      var sphere = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_3__.create4DSphereMesh)(start, sphereRadius, defaultSphereMaterial);\n      verticesGroup.add(sphere);\n      uniquePoints.add(startKey);\n    }\n    if (!uniquePoints.has(endKey)) {\n      var _sphere2 = (0,_geometries_js__WEBPACK_IMPORTED_MODULE_3__.create4DSphereMesh)(end, sphereRadius, defaultSphereMaterial);\n      verticesGroup.add(_sphere2);\n      uniquePoints.add(endKey);\n    }\n  });\n  return {\n    wireframeGroup: wireframeGroup,\n    verticesGroup: verticesGroup\n  };\n}\n\n// 加载模型\nfunction loadMesh(meshData, material) {\n  var container = new three__WEBPACK_IMPORTED_MODULE_8__.Object3D();\n  var geometry = new three__WEBPACK_IMPORTED_MODULE_8__.BufferGeometry();\n  var vertices = new Float32Array(meshData.vertices.length * 3);\n  meshData.vertices.forEach(function (v, i) {\n    vertices[i * 3] = v.x;\n    vertices[i * 3 + 1] = v.y;\n    vertices[i * 3 + 2] = v.z;\n  });\n  geometry.setAttribute('position', new three__WEBPACK_IMPORTED_MODULE_8__.BufferAttribute(vertices, 3));\n  var indices = [];\n  meshData.faces.forEach(function (face) {\n    if (face.length === 3) indices.push.apply(indices, _toConsumableArray(face));\n  });\n  geometry.setIndex(indices);\n  geometry.computeVertexNormals();\n  var mesh = new three__WEBPACK_IMPORTED_MODULE_8__.Mesh(geometry, material);\n  mesh.material.side = three__WEBPACK_IMPORTED_MODULE_8__.DoubleSide;\n  var scaleFactor = 40 / (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.getFarthestPointDist)(meshData.vertices);\n  var _createWireframeAndVe = createWireframeAndVertices(meshData.edges, {\n      cylinderRadius: 0.5 / scaleFactor\n    }),\n    wireframeGroup = _createWireframeAndVe.wireframeGroup,\n    verticesGroup = _createWireframeAndVe.verticesGroup;\n  container.add(mesh);\n  container.add(wireframeGroup);\n  container.add(verticesGroup);\n  container.scale.setScalar(scaleFactor);\n  scene.add(container);\n  render();\n  return {\n    scaleFactor: scaleFactor,\n    solidGroup: container,\n    facesGroup: mesh,\n    wireframeGroup: wireframeGroup,\n    verticesGroup: verticesGroup\n  };\n}\nfunction load4DMesh(meshData, material) {\n  var container = new three__WEBPACK_IMPORTED_MODULE_8__.Object3D();\n  var geometry = new three__WEBPACK_IMPORTED_MODULE_8__.BufferGeometry();\n\n  // 这里 position 属性虽然没有实际作用，但是必须得写，防止着色器报错\n  var vertices = new Float32Array(meshData.vertices.length * 3);\n  meshData.vertices.forEach(function (v, i) {\n    vertices[i * 3] = v.x;\n    vertices[i * 3 + 1] = v.y;\n    vertices[i * 3 + 2] = v.z;\n  });\n  geometry.setAttribute('position', new three__WEBPACK_IMPORTED_MODULE_8__.BufferAttribute(vertices, 3));\n  var vertices4D = new Float32Array(meshData.vertices.length * 4);\n  meshData.vertices.forEach(function (v, i) {\n    vertices4D[i * 4] = v.x;\n    vertices4D[i * 4 + 1] = v.y;\n    vertices4D[i * 4 + 2] = v.z;\n    vertices4D[i * 4 + 3] = v.w;\n  });\n  geometry.setAttribute('position4D', new three__WEBPACK_IMPORTED_MODULE_8__.BufferAttribute(vertices4D, 4));\n  var indices = [];\n  meshData.faces.forEach(function (face) {\n    if (face.length === 3) indices.push.apply(indices, _toConsumableArray(face));\n  });\n  geometry.setIndex(indices);\n  geometry.computeVertexNormals();\n  var mesh = new three__WEBPACK_IMPORTED_MODULE_8__.Mesh(geometry, material);\n  mesh.material.side = three__WEBPACK_IMPORTED_MODULE_8__.DoubleSide;\n  projectionDistanceSlider.value = (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.getFarthest4DPointDist)(meshData.vertices) * 1.1;\n  updateProjectionDistance();\n  var scaleFactor = 40 / (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.getFarthestPointDist)(meshData.vertices.map(function (p) {\n    var d = +projectionDistanceSlider.value;\n    var s = d / (d + p.w);\n    return {\n      x: p.x * s,\n      y: p.y * s,\n      z: p.z * s\n    };\n  }));\n  var _create4DWireframeAnd = create4DWireframeAndVertices(meshData.edges, {\n      cylinderRadius: 0.5 / scaleFactor\n    }),\n    wireframeGroup = _create4DWireframeAnd.wireframeGroup,\n    verticesGroup = _create4DWireframeAnd.verticesGroup;\n  container.add(mesh);\n  container.add(wireframeGroup);\n  container.add(verticesGroup);\n  container.scale.setScalar(scaleFactor);\n  scene.add(container);\n  render();\n  return {\n    scaleFactor: scaleFactor,\n    solidGroup: container,\n    facesGroup: mesh,\n    wireframeGroup: wireframeGroup,\n    verticesGroup: verticesGroup\n  };\n}\n\n// 加载 OFF\nfunction loadMeshFromOffData(data, material) {\n  var mesh = (0,_offProcessor_js__WEBPACK_IMPORTED_MODULE_4__.parseOFF)(data);\n  var processedMesh = (0,_offProcessor_js__WEBPACK_IMPORTED_MODULE_4__.processMeshData)(mesh);\n  var _loadMesh = loadMesh(processedMesh, material);\n  scaleFactor = _loadMesh.scaleFactor;\n  solidGroup = _loadMesh.solidGroup;\n  facesGroup = _loadMesh.facesGroup;\n  wireframeGroup = _loadMesh.wireframeGroup;\n  verticesGroup = _loadMesh.verticesGroup;\n  updateProperties();\n}\nfunction loadMeshFrom4OffData(data, material) {\n  var mesh = (0,_offProcessor4D_js__WEBPACK_IMPORTED_MODULE_5__.parse4OFF)(data);\n  var processedMesh = (0,_offProcessor4D_js__WEBPACK_IMPORTED_MODULE_5__.process4DMeshData)(mesh);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].faceMaterial(material, rotUni, projDistUni);\n  var _load4DMesh = load4DMesh(processedMesh, material);\n  scaleFactor = _load4DMesh.scaleFactor;\n  solidGroup = _load4DMesh.solidGroup;\n  facesGroup = _load4DMesh.facesGroup;\n  wireframeGroup = _load4DMesh.wireframeGroup;\n  verticesGroup = _load4DMesh.verticesGroup;\n  updateProperties();\n  updateProjectionDistance();\n  updateRotation();\n}\nfunction loadMeshFromUrl(url, material) {\n  return new Promise(function (resolve) {\n    fetch(url).then(function (response) {\n      if (!response.ok) {\n        throw new Error('网络响应不正常');\n      }\n      return response.text();\n    }).then(function (data) {\n      loadMeshFromOffData(data, material);\n      resolve();\n    });\n  });\n}\nvar material = new three__WEBPACK_IMPORTED_MODULE_8__.MeshPhongMaterial({\n  color: 0x555555,\n  specular: 0x222222,\n  shininess: 50,\n  flatShading: true,\n  transparent: true\n});\nloadMeshFromUrl(_assets_models_tri_off__WEBPACK_IMPORTED_MODULE_6__, material);\n\n// 事件监听\nfunction updateProperties() {\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(facesGroup, 'visible', faceVisibleSwitcher.checked);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(wireframeGroup, 'visible', wireframeVisibleSwitcher.checked);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(verticesGroup, 'visible', verticesVisibleSwitcher.checked);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(axesGroup, 'visible', axisVisibleSwitcher.checked);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(facesGroup, 'opacity', +facesOpacitySlider.value);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeCylindersRadius)(wireframeGroup, +wireframeAndVerticesDimSlider.value / scaleFactor);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeSpheresRadius)(verticesGroup, +wireframeAndVerticesDimSlider.value / scaleFactor * 2);\n}\nfaceVisibleSwitcher.addEventListener('change', function () {\n  return (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(facesGroup, 'visible', faceVisibleSwitcher.checked);\n});\nwireframeVisibleSwitcher.addEventListener('change', function () {\n  return (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(wireframeGroup, 'visible', wireframeVisibleSwitcher.checked);\n});\nverticesVisibleSwitcher.addEventListener('change', function () {\n  return (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(verticesGroup, 'visible', verticesVisibleSwitcher.checked);\n});\naxisVisibleSwitcher.addEventListener('change', function () {\n  return (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(axesGroup, 'visible', axisVisibleSwitcher.checked);\n});\nfacesOpacitySlider.addEventListener('input', function () {\n  return (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeMaterialProperty)(facesGroup, 'opacity', +facesOpacitySlider.value);\n});\nwireframeAndVerticesDimSlider.addEventListener('input', function () {\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeCylindersRadius)(wireframeGroup, +wireframeAndVerticesDimSlider.value / scaleFactor);\n  (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.changeSpheresRadius)(verticesGroup, +wireframeAndVerticesDimSlider.value / scaleFactor * 2);\n});\nfunction updateProjectionDistance() {\n  projDistUni.value = +projectionDistanceSlider.value;\n}\nprojectionDistanceSlider.addEventListener('input', updateProjectionDistance);\nfunction updateRotation() {\n  var rotations = rotationSliders.map(function (i) {\n    return +i.value;\n  });\n  rotUni.value = rotations;\n  if (!is4D) {\n    solidGroup.rotation.x = rotations[3] * (Math.PI / -180);\n    solidGroup.rotation.y = rotations[1] * (Math.PI / 180);\n    solidGroup.rotation.z = rotations[0] * (Math.PI / -180);\n  }\n}\nrotationSliders.forEach(function (slider, i) {\n  slider.addEventListener('input', function () {\n    rotUni.value[i] = +slider.value;\n    if (!is4D) {\n      if (i === 3) solidGroup.rotation.x = +slider.value * (Math.PI / -180);else if (i === 1) solidGroup.rotation.y = +slider.value * (Math.PI / 180);else if (i === 0) solidGroup.rotation.z = +slider.value * (Math.PI / -180);\n    }\n  });\n});\nfunction toggleCamera() {\n  var isPersp = perspSwitcher.checked;\n  var oldCamera = camera.clone();\n  if (isPersp) {\n    camera = cameraPersp.clone();\n    camera.position.copy(oldCamera.position);\n    camera.rotation.copy(oldCamera.rotation);\n    camera.quaternion.copy(oldCamera.quaternion);\n  } else {\n    camera = cameraOrtho.clone();\n    camera.position.copy(oldCamera.position);\n    camera.rotation.copy(oldCamera.rotation);\n    camera.quaternion.copy(oldCamera.quaternion);\n  }\n  controls.object = camera;\n}\nperspSwitcher.addEventListener('change', toggleCamera);\nfileInput.addEventListener('change', function (e) {\n  var file = e.target.files[0];\n  if (!file) return;\n  var reader = new FileReader();\n  reader.onload = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {\n      var data, material;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            data = e.target.result;\n            if (solidGroup) {\n              (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_2__.disposeGroup)(solidGroup);\n              scene.remove(solidGroup);\n            }\n            is4D = data.split('\\n').filter(function (line) {\n              return line.trim() !== '' && !line.startsWith('#');\n            })[0].trim() === '4OFF';\n            material = new three__WEBPACK_IMPORTED_MODULE_8__.MeshPhongMaterial({\n              color: 0x555555,\n              specular: 0x222222,\n              shininess: 50,\n              flatShading: true,\n              transparent: true\n            });\n            if (is4D) {\n              loadMeshFrom4OffData(data, material);\n              projectionDistanceSlider.disabled = false;\n              rotationSliders[2].disabled = false;\n              rotationSliders[4].disabled = false;\n              rotationSliders[5].disabled = false;\n            } else {\n              loadMeshFromOffData(data, material);\n              projectionDistanceSlider.disabled = true;\n              rotationSliders[2].disabled = true;\n              rotationSliders[4].disabled = true;\n              rotationSliders[5].disabled = true;\n              rotationSliders[2].value = 0;\n              rotationSliders[4].value = 0;\n              rotationSliders[5].value = 0;\n              updateRotation();\n            }\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  reader.readAsText(file);\n});\n\n//# sourceURL=webpack:///./src/viewer.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/^blob:/, "").replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl + "../";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"index": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunk"] = self["webpackChunk"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendors"], () => (__webpack_require__("./src/index.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;