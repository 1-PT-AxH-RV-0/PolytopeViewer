/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json":
/*!********************************************************!*\
  !*** ./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__.p + \"assets/Sarasa_Mono_SC_Bold.typeface.json\";\n\n//# sourceURL=webpack:///./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json?");

/***/ }),

/***/ "./assets/models/Small_stellated_dodecahedron.off":
/*!********************************************************!*\
  !*** ./assets/models/Small_stellated_dodecahedron.off ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__.p + \"assets/Small_stellated_dodecahedron.off\";\n\n//# sourceURL=webpack:///./assets/models/Small_stellated_dodecahedron.off?");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/style.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body {\n  margin: 0;\n  font-family:\n    monospace,\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    'Segoe UI',\n    Roboto,\n    Oxygen,\n    Ubuntu,\n    Cantarell,\n    'Open Sans',\n    'Helvetica Neue',\n    sans-serif;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  height: 100dvh;\n  width: 100dvw;\n  overflow: hidden;\n}\n\n@media (min-aspect-ratio: 1/1) {\n  body {\n    flex-direction: row;\n  }\n}\n\n@media (max-aspect-ratio: 1/1) {\n  body {\n    flex-direction: column;\n  }\n}\n\n.polytope-renderer {\n  display: block;\n}\n\n.controls {\n  overflow: auto;\n  padding: 8px;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.file-input {\n  display: none;\n}\n\n.config-file-input {\n  display: none;\n}\n\n.info {\n  position: absolute;\n  left: 4px;\n  top: 4px;\n  font-size: 0.5rem;\n  color: white;\n  pointer-events: none;\n}\n\n.prog-container {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n}\n\n.prog {\n  text-align: center;\n  font-size: 2rem;\n  color: white;\n}\n\n.nanobar {\n  border: solid 1px white;\n  height: 12px;\n  margin: 0 auto;\n}\n\n.bar {\n  background-color: #25c4d3;\n}\n`, \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack:///./src/style.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./src/GLSLs.js":
/*!**********************!*\
  !*** ./src/GLSLs.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar transformCylinderPoint = \"\\nvec3 transformCylinderPoint(vec3 point, vec3 v1, vec3 v2) {\\n    // Compute direction and length\\n    vec3 d = v2 - v1;\\n    float d_length = length(d);\\n    \\n    vec3 d_ = d;\\n    d_.y = 0.0;\\n    if (length(d_) < 1e-6) {\\n      vec3 scaled_point = point * vec3(1.0, d_length, 1.0);\\n      if (v2.y > v1.y) return scaled_point + v1;\\n      if (v2.y < v1.y) return scaled_point + v2;\\n    }\\n    \\n    // If v1 and v2 are too close, return v1 (or discard)\\n    if (d_length < 1e-6) {\\n        return v1; // Or handle as error\\n    }\\n    vec3 d_normalized = d / d_length;\\n\\n    // Step 1: Scale along y-axis\\n    vec3 scaled_point = point * vec3(1.0, d_length, 1.0);\\n\\n    // Step 2: Rotate y-axis to d_normalized\\n    vec3 y_axis = vec3(0.0, 1.0, 0.0);\\n    float dot_product = dot(y_axis, d_normalized);\\n    \\n    // Handle parallel cases (dot_product \\u2248 \\xB11)\\n    if (abs(dot_product) > 0.99999) {\\n        if (dot_product < 0.0) {\\n            // Opposite direction: rotate 180\\xB0 around x-axis\\n            scaled_point.y = -scaled_point.y; // Equivalent to 180\\xB0 rotation\\n        }\\n        // Else: same direction, no rotation needed\\n    } else {\\n        // General case: compute rotation axis and angle\\n        vec3 rotation_axis = normalize(cross(d_normalized, y_axis));\\n        float rotation_angle = acos(clamp(dot_product, -1.0, 1.0));\\n        \\n        // Rodrigues' rotation formula\\n        float cos_angle = cos(rotation_angle);\\n        float sin_angle = sin(rotation_angle);\\n        \\n        mat3 K = mat3(\\n            0.0, -rotation_axis.z, rotation_axis.y,\\n            rotation_axis.z, 0.0, -rotation_axis.x,\\n            -rotation_axis.y, rotation_axis.x, 0.0\\n        );\\n        mat3 R = mat3(1.0) + sin_angle * K + (1.0 - cos_angle) * (K * K);\\n        scaled_point = R * scaled_point;\\n    }\\n\\n    // Step 3: Translate to v1\\n    return scaled_point + v1;\\n}\\n\";\nvar schlegelProjection = \"\\nvec3 schlegelProjection(vec4 point4D) {\\n  if (isOrtho) return point4D.xyz;\\n  return projectionDistance * point4D.xyz / (projectionDistance - point4D.w);\\n}\\n\";\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  schlegelProjection: schlegelProjection,\n  transformCylinderPoint: transformCylinderPoint\n});\n\n//# sourceURL=webpack:///./src/GLSLs.js?");

/***/ }),

/***/ "./src/axesCreater.js":
/*!****************************!*\
  !*** ./src/axesCreater.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.core.js\");\n/* harmony import */ var three_addons_loaders_FontLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three/addons/loaders/FontLoader.js */ \"./node_modules/three/examples/jsm/loaders/FontLoader.js\");\n/* harmony import */ var three_addons_geometries_TextGeometry_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/addons/geometries/TextGeometry.js */ \"./node_modules/three/examples/jsm/geometries/TextGeometry.js\");\n/* harmony import */ var _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shaderCompCallback.js */ \"./src/shaderCompCallback.js\");\n/* harmony import */ var _helperFunc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helperFunc.js */ \"./src/helperFunc.js\");\n/* harmony import */ var _assets_fonts_Sarasa_Mono_SC_Bold_typeface_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/fonts/Sarasa_Mono_SC_Bold.typeface.json */ \"./assets/fonts/Sarasa_Mono_SC_Bold.typeface.json\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\nvar axisLength = 100;\nvar cylinderRadius = 0.5;\nvar coneRadius = 2;\nvar coneHeight = 6;\nvar textSize = 5;\nvar textOffset = 7;\n\n/**\n * 创建标准材质。\n * @param {number} color - 材质颜色。\n * @returns {THREE.MeshStandardMaterial} 标准材质对象。\n */\nfunction createMaterial(color) {\n  return new three__WEBPACK_IMPORTED_MODULE_3__.MeshStandardMaterial({\n    color: color,\n    roughness: 0.3,\n    metalness: 0.0,\n    flatShading: true\n  });\n}\n\n/**\n * 异步加载字体。\n * @param {string} url - 字体文件URL。\n * @returns {Promise<THREE.Font>} 返回加载完成的字体对象。\n */\nfunction loadFontAsync(url) {\n  return new Promise(function (resolve, reject) {\n    var loader = new three_addons_loaders_FontLoader_js__WEBPACK_IMPORTED_MODULE_4__.FontLoader();\n    loader.load(url, function (font) {\n      return resolve(font);\n    }, undefined, function (error) {\n      return reject(error);\n    });\n  });\n}\n\n/**\n * 创建坐标轴圆柱体网格。\n * @param {number} axis - 坐标轴索引 (0:X, 1:Y, 2:Z, 3:W)。\n * @param {number} color - 圆柱体颜色。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵的 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {THREE.Mesh} 圆柱体网格对象\n */\nfunction createAxisCylinderMesh(axis, color, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n  var geometry = (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_1__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_3__.CylinderGeometry(cylinderRadius, cylinderRadius, 1, 10));\n  var vertexCount = geometry.attributes.position.count;\n  var axisArr = new Uint32Array(vertexCount);\n  var lenArr = new Float32Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    axisArr[i] = axis;\n    lenArr[i] = axisLength / 2;\n  }\n  geometry.setAttribute('axis', new three__WEBPACK_IMPORTED_MODULE_3__.Uint32BufferAttribute(axisArr, 1));\n  geometry.setAttribute('len', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(lenArr, 1));\n  var material = createMaterial(color);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].axisMaterial(material, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n  var cylinder = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(geometry, material);\n  return cylinder;\n}\n\n/**\n * 创建坐标轴圆锥体网格\n * @param {number} axis - 坐标轴索引 (0:X, 1:Y, 2:Z, 3:W)。\n * @param {number} color - 圆锥体颜色。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵的 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {THREE.Mesh} 圆锥体网格对象。\n */\nfunction createAxisConeMesh(axis, color, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n  var geometry = (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_1__.toBufferGeometry)(new three__WEBPACK_IMPORTED_MODULE_3__.ConeGeometry(coneRadius, 1, 10));\n  var vertexCount = geometry.attributes.position.count;\n  var axisArr = new Uint32Array(vertexCount);\n  var lenArr = new Float32Array(vertexCount);\n  var heightArr = new Float32Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    axisArr[i] = axis;\n    lenArr[i] = axisLength / 2;\n    heightArr[i] = coneHeight;\n  }\n  geometry.setAttribute('axis', new three__WEBPACK_IMPORTED_MODULE_3__.Uint32BufferAttribute(axisArr, 1));\n  geometry.setAttribute('len', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(lenArr, 1));\n  geometry.setAttribute('height', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(heightArr, 1));\n  var material = createMaterial(color);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].axisConeMaterial(material, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n  var cone = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(geometry, material);\n  return cone;\n}\n\n/**\n * 创建坐标轴标签网格\n * @param {number} axis - 坐标轴索引 (0:X, 1:Y, 2:Z, 3:W)。\n * @param {number} color - 标签颜色。\n * @param {string} text - 标签文本。\n * @param {THREE.Font} font - 字体对象。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵的 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {THREE.Mesh} 标签网格对象。\n */\nfunction createAxisLabelMesh(axis, color, text, font, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n  var geometry = (0,_helperFunc_js__WEBPACK_IMPORTED_MODULE_1__.toBufferGeometry)(new three_addons_geometries_TextGeometry_js__WEBPACK_IMPORTED_MODULE_5__.TextGeometry(text, {\n    font: font,\n    size: textSize,\n    depth: cylinderRadius * 2,\n    curveSegments: 12\n  }));\n  geometry.computeBoundingBox();\n  geometry.center();\n  var vertexCount = geometry.attributes.position.count;\n  var axisArr = new Uint32Array(vertexCount);\n  var lenArr = new Float32Array(vertexCount);\n  var offsetArr = new Float32Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    axisArr[i] = axis;\n    lenArr[i] = axisLength / 2;\n    offsetArr[i] = coneHeight + textOffset;\n  }\n  geometry.setAttribute('axis', new three__WEBPACK_IMPORTED_MODULE_3__.Uint32BufferAttribute(axisArr, 1));\n  geometry.setAttribute('len', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(lenArr, 1));\n  geometry.setAttribute('offset', new three__WEBPACK_IMPORTED_MODULE_3__.Float32BufferAttribute(offsetArr, 1));\n  var material = createMaterial(color);\n  material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].axisLabelMaterial(material, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n  var label = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(geometry, material);\n  return label;\n}\n\n/**\n * 创建坐标轴系统。\n * @param {THREE.Scene} scene - 场景对象。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵的 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {Promise<THREE.Group>} 包含所有坐标轴元素的组对象。\n */\nfunction createAxes(_x, _x2, _x3, _x4, _x5) {\n  return _createAxes.apply(this, arguments);\n}\nfunction _createAxes() {\n  _createAxes = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(scene, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n    var font, container, cylinderX, coneX, labelX, cylinderY, coneY, labelY, cylinderZ, coneZ, labelZ, cylinderW, coneW, labelW;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return loadFontAsync(_assets_fonts_Sarasa_Mono_SC_Bold_typeface_json__WEBPACK_IMPORTED_MODULE_2__);\n        case 2:\n          font = _context.sent;\n          container = new three__WEBPACK_IMPORTED_MODULE_3__.Group();\n          cylinderX = createAxisCylinderMesh(0, 0xff0000, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          coneX = createAxisConeMesh(0, 0xff0000, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          labelX = createAxisLabelMesh(0, 0xff0000, 'X', font, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          cylinderY = createAxisCylinderMesh(1, 0x00ff00, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          coneY = createAxisConeMesh(1, 0x00ff00, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          labelY = createAxisLabelMesh(1, 0x00ff00, 'Y', font, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          cylinderZ = createAxisCylinderMesh(2, 0x0000ff, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          coneZ = createAxisConeMesh(2, 0x0000ff, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          labelZ = createAxisLabelMesh(2, 0x0000ff, 'Z', font, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          cylinderW = createAxisCylinderMesh(3, 0xf07026, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          coneW = createAxisConeMesh(3, 0xf07026, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          labelW = createAxisLabelMesh(3, 0xf07026, 'W', font, rotUni, ofsUni, ofs3Uni, offsetScaleUni);\n          container.add(cylinderX, coneX, labelX);\n          container.add(cylinderY, coneY, labelY);\n          container.add(cylinderZ, coneZ, labelZ);\n          container.add(cylinderW, coneW, labelW);\n          scene.add(container);\n          return _context.abrupt(\"return\", container);\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _createAxes.apply(this, arguments);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createAxes);\n\n//# sourceURL=webpack:///./src/axesCreater.js?");

/***/ }),

/***/ "./src/shaderCompCallback.js":
/*!***********************************!*\
  !*** ./src/shaderCompCallback.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _GLSLs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GLSLs.js */ \"./src/GLSLs.js\");\n\n\n\n/**\n * 3D 空间球体材质：在顶点阶段简单地按 radius 缩放顶点。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<number>} sphereRadiusUni - 球体半径 uniform.\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction sphereMaterial3D(material, sphereRadiusUni, rotUni, ofs3Uni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.radius = sphereRadiusUni;\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.vertexShader = \"\\n      attribute vec3 pos;\\n      uniform float radius;\\n      uniform mat4 rotation4D;\\n      uniform vec3 offset3D;\\n      \".concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u9876\\u70B9\\u6309 radius \\u7EDF\\u4E00\\u7F29\\u653E\\n      transformed *= radius;\\n      transformed += (rotation4D * vec4(pos, 0)).xyz;\\n      transformed += offset3D;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 3D 空间圆柱材质：在顶点阶段按 x, z 方向缩放至所需半径。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<number>} cylinderRadiusUni - 圆柱半径 uniform.\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction cylinderMaterial3D(material, cylinderRadiusUni, rotUni, ofs3Uni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.radius = cylinderRadiusUni;\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.vertexShader = \"\\n      attribute vec3 v1;\\n      attribute vec3 v2;\\n      uniform float radius;\\n      uniform mat4 rotation4D;\\n      uniform vec3 offset3D;\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <defaultnormal_vertex>', \"\\n      #include <defaultnormal_vertex>\\n      // \\u8BA1\\u7B97\\u6CD5\\u5411\\u91CF\\u3002\\n      vec3 transformedV1 = (rotation4D * vec4(v1, 0)).xyz;\\n      vec3 transformedV2 = (rotation4D * vec4(v2, 0)).xyz;\\n      \\n      objectNormal = transformCylinderPoint(objectNormal, transformedV1, transformedV2);\\n      transformedNormal = normalMatrix * objectNormal;\\n      \").replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u8BA9\\u5706\\u67F1\\u53D8\\u7C97/\\u7EC6\\u3002\\n      transformed.x *= radius;\\n      transformed.z *= radius;\\n      transformed.y += 0.5;\\n      transformed = transformCylinderPoint(transformed, transformedV1, transformedV2);\\n      transformed += offset3D;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 面片材质，在 Shader 中旋转顶点。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction faceMaterial3D(material, rotUni, ofs3Uni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.vertexShader = \"\\n      uniform mat4 rotation4D;\\n      uniform vec3 offset3D;\\n      \".concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u5C06\\u4F4D\\u7F6E\\u65CB\\u8F6C\\u3002\\n      transformed = (rotation4D * vec4(transformed, 0)).xyz;\\n      transformed += offset3D;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 创建一个可以在顶点着色器中将网格顶点映射到4D球面的材质。\n * 过程：克隆材质，注入 Schlegel 投影、4D 旋转矩阵等 GLSL 片段，并在顶点阶段根据旋转和投影计算出 3D 坐标。\n * @param {THREE.Material} material - 原始 Three.js 材质。\n * @param {THREE.IUniform<number>} sphereRadiusUni - 球体半径 uniform.\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} projDistUni - 投影距离 uniform.\n * @param {THREE.IUniform<boolean>} isOrthoUni - 是否正交投影 uniform.\n * @returns {THREE.Material} 新的材质实例。\n */\nfunction sphereMaterial(material, sphereRadiusUni, rotUni, ofsUni, ofs3Uni, projDistUni, isOrthoUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset4D = ofsUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.uniforms.radius = sphereRadiusUni;\n    shader.uniforms.isOrtho = isOrthoUni;\n    shader.vertexShader = \"\\n      attribute vec4 center4D;\\n      uniform float radius;\\n      uniform float projectionDistance;\\n      uniform bool isOrtho;\\n      uniform mat4 rotation4D;\\n      uniform vec4 offset4D;\\n      uniform vec3 offset3D;\\n\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n\n    // 替换 <begin_vertex> 段，将顶点先缩放再移到四维中心投影位置\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u5C06\\u9876\\u70B9\\u6309\\u7403\\u4F53\\u534A\\u5F84\\u7F29\\u653E\\uFF0C\\u518D\\u52A0\\u4E0A\\u4E2D\\u5FC3\\u70B9\\u7684 3D \\u6295\\u5F71\\n      vec3 center3D = schlegelProjection(rotation4D * center4D + offset4D);\\n      transformed = transformed * radius + center3D + offset3D;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 创建一个可以在顶点着色器中将网格顶点映射到 4D 圆柱面的材质。\n * 过程：克隆材质，注入 Schlegel 投影 & 4D 旋转等工具函数，并在顶点阶段通过 transformCylinderPoint 计算圆柱表面点。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<number>} cylinderRadiusUni - 圆柱半径 uniform.\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} projDistUni - 投影距离 uniform.\n * @param {THREE.IUniform<boolean>} isOrthoUni - 是否正交投影 uniform.\n * @returns {THREE.Material} 新材质实例。\n */\nfunction cylinderMaterial(material, cylinderRadiusUni, rotUni, ofsUni, ofs3Uni, projDistUni, isOrthoUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset4D = ofsUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.uniforms.radius = cylinderRadiusUni;\n    shader.uniforms.isOrtho = isOrthoUni;\n    shader.vertexShader = \"\\n      attribute vec4 v1;\\n      attribute vec4 v2;\\n      uniform float radius;\\n      uniform float projectionDistance;\\n      uniform bool isOrtho;\\n      uniform mat4 rotation4D;\\n      uniform vec4 offset4D;\\n      uniform vec3 offset3D;\\n      \\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <defaultnormal_vertex>', \"\\n      #include <defaultnormal_vertex>\\n      // \\u8BA1\\u7B97 4D \\u7A7A\\u95F4\\u4E2D\\u5706\\u67F1\\u4E24\\u7AEF\\u70B9\\u7684\\u6295\\u5F71\\n      vec3 pv1 = schlegelProjection(rotation4D * v1 + offset4D);\\n      vec3 pv2 = schlegelProjection(rotation4D * v2 + offset4D);\\n      // \\u8BA1\\u7B97\\u6CD5\\u5411\\u91CF\\n      objectNormal = transformCylinderPoint(objectNormal, pv1, pv2);\\n      transformedNormal = normalMatrix * objectNormal;\\n      \").replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u5C06\\u6A21\\u578B\\u9876\\u70B9\\u5728 x, z \\u65B9\\u5411\\u7F29\\u653E\\u81F3\\u6240\\u9700\\u534A\\u5F84\\uFF08\\u8BA9\\u5706\\u67F1\\u53D8\\u7C97/\\u7EC6\\uFF09\\n      transformed.x *= radius;\\n      transformed.z *= radius;\\n      transformed.y += 0.5;\\n      // \\u5C06\\u9876\\u70B9\\u65CB\\u8F6C\\u5E73\\u79FB\\u5230\\u5408\\u9002\\u4F4D\\u7F6E\\n      transformed = transformCylinderPoint(transformed, pv1, pv2) + offset3D;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 面片材质：将面的位置从 4D 空间经旋转后投影到 3D。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} projDistUni - 投影距离 uniform.\n * @param {THREE.IUniform<boolean>} isOrthoUni - 是否正交投影 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction faceMaterial(material, rotUni, ofsUni, ofs3Uni, projDistUni, isOrthoUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.projectionDistance = projDistUni;\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset4D = ofsUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.uniforms.isOrtho = isOrthoUni;\n    shader.vertexShader = \"\\n      attribute vec4 position4D;\\n      uniform float projectionDistance;\\n      uniform bool isOrtho;\\n      uniform mat4 rotation4D;\\n      uniform vec4 offset4D;\\n      uniform vec3 offset3D;\\n      \\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].schlegelProjection, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u5C06\\u56DB\\u7EF4\\u4F4D\\u7F6E\\u65CB\\u8F6C\\u540E\\u6295\\u5F71\\u5230\\u4E09\\u7EF4\\u7A7A\\u95F4\\n      vec4 rotatedPosition4D = rotation4D * position4D + offset4D;\\n      transformed = schlegelProjection(rotatedPosition4D) + offset3D;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 轴线材质：在四维空间中选择某一坐标轴，映射为三维的一根圆柱。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction axisMaterial(material, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset4D = ofsUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.uniforms.offsetScale = offsetScaleUni;\n    shader.vertexShader = \"\\n      attribute uint axis;\\n      attribute float len;\\n      uniform mat4 rotation4D;\\n      uniform vec4 offset4D;\\n      uniform vec3 offset3D;\\n      uniform float offsetScale;\\n      \\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u6839\\u636E axis \\u51B3\\u5B9A\\u6295\\u5F71\\u5230\\u56DB\\u7EF4\\u54EA\\u6761\\u8F74\\u4E0A\\n      vec4 v = vec4(0.0);\\n      if (axis == 0u) v.x = 1.0;\\n      else if (axis == 1u) v.y = 1.0;\\n      else if (axis == 2u) v.z = 1.0;\\n      else if (axis == 3u) v.w = 1.0;\\n      // \\u6295\\u5F71\\u5E76\\u8BA1\\u7B97\\u7F29\\u653E\\uFF0C\\u4F7F\\u5706\\u67F1\\u957F\\u5EA6\\u7B26\\u5408 len\\n      vec3 vProj = (rotation4D * v).xyz;\\n      float s = length(vProj) / length(v);\\n      float scale = len / length(vProj) * s;\\n      vProj *= scale;\\n      // \\u65CB\\u8F6C\\u4E0E\\u5E73\\u79FB\\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), -vProj + offset4D.xyz * offsetScale, vProj + offset4D.xyz * offsetScale) + offset3D * offsetScale;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 轴锥材质：在四维空间中选择轴线，并生成一个锥体。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction axisConeMaterial(material, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset4D = ofsUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.uniforms.offsetScale = offsetScaleUni;\n    shader.vertexShader = \"\\n      attribute uint axis;\\n      attribute float len;\\n      attribute float height;\\n      uniform mat4 rotation4D;\\n      uniform vec4 offset4D;\\n      uniform vec3 offset3D;\\n      uniform float offsetScale;\\n\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u540C axisMaterial\\uFF0C\\u4F46\\u662F\\u5E95\\u90E8\\u5750\\u6807\\u53D8\\u6210\\u4E86\\u5750\\u6807\\u8F74\\u5706\\u67F1\\u7684\\u7ED3\\u675F\\u5750\\u6807\\u3002\\n      vec4 v = vec4(0.0);\\n      if (axis == 0u) v.x = 1.0;\\n      else if (axis == 1u) v.y = 1.0;\\n      else if (axis == 2u) v.z = 1.0;\\n      else if (axis == 3u) v.w = 1.0;\\n      vec3 vProj = (rotation4D * v).xyz;\\n      float s = length(vProj) / length(v);\\n      float scale1 = len / length(vProj) * s;\\n      float scale2 = (len * s + height) / length(vProj);\\n      vec3 vProj1 = vProj * scale1;\\n      vec3 vProj2 = vProj * scale2;\\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), vProj1 + offset4D.xyz * offsetScale, vProj2 + offset4D.xyz * offsetScale) + offset3D * offsetScale;\\n      \");\n  };\n  return material;\n}\n\n/**\n * 轴标签材质：在轴线上添加文本标签。\n * @param {THREE.Material} material - 原始材质。\n * @param {THREE.IUniform<THREE.Matrix4>} rotUni - 4D 旋转矩阵 uniform.\n * @param {THREE.IUniform<THREE.Vector4>} ofsUni - 4D 位置偏移 uniform.\n * @param {THREE.IUniform<THREE.Vector3>} ofs3Uni - 3D 位置偏移 uniform.\n * @param {THREE.IUniform<number>} offsetScaleUni - 位置偏移缩放 uniform.\n * @returns {THREE.Material} - 新材质实例。\n */\nfunction axisLabelMaterial(material, rotUni, ofsUni, ofs3Uni, offsetScaleUni) {\n  material = material.clone();\n  material.onBeforeCompile = function (shader) {\n    shader.uniforms.rotation4D = rotUni;\n    shader.uniforms.offset4D = ofsUni;\n    shader.uniforms.offset3D = ofs3Uni;\n    shader.uniforms.offsetScale = offsetScaleUni;\n    shader.vertexShader = \"\\n      attribute uint axis;\\n      attribute float len;\\n      attribute float offset;\\n      uniform mat4 rotation4D;\\n      uniform vec4 offset4D;\\n      uniform vec3 offset3D;\\n      uniform float offsetScale;\\n\\n      \".concat(_GLSLs_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transformCylinderPoint, \"\\n      \").concat(shader.vertexShader, \"\\n    \");\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n      #include <begin_vertex>\\n      // \\u7C7B\\u4F3C axisCone\\uFF0C\\u4F46\\u662F\\u5F80\\u5750\\u6807\\u8F74\\u65B9\\u5411\\u4E0A\\u504F\\u79FB\\u4E86\\u4E00\\u4E9B\\u3002\\n      vec4 v = vec4(0.0);\\n      if (axis == 0u) v.x = 1.0;\\n      else if (axis == 1u) v.y = 1.0;\\n      else if (axis == 2u) v.z = 1.0;\\n      else if (axis == 3u) v.w = 1.0;\\n      vec3 vProj = (rotation4D * v).xyz;\\n      float s = length(vProj) / length(v);\\n      float scale1 = (len * s + offset) / length(vProj);\\n      float scale2 = (len * s + offset + 1.0) / length(vProj);\\n      vec3 vProj1 = vProj * scale1;\\n      vec3 vProj2 = vProj * scale2;\\n      transformed = transformCylinderPoint(position + vec3(0.0, 0.5, 0.0), vProj1 + offset4D.xyz * offsetScale, vProj2 + offset4D.xyz * offsetScale) + offset3D * offsetScale;\\n      \");\n  };\n  return material;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  sphereMaterial3D: sphereMaterial3D,\n  cylinderMaterial3D: cylinderMaterial3D,\n  faceMaterial3D: faceMaterial3D,\n  sphereMaterial: sphereMaterial,\n  cylinderMaterial: cylinderMaterial,\n  faceMaterial: faceMaterial,\n  axisMaterial: axisMaterial,\n  axisConeMaterial: axisConeMaterial,\n  axisLabelMaterial: axisLabelMaterial\n});\n\n//# sourceURL=webpack:///./src/shaderCompCallback.js?");

/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./style.css */ \"./node_modules/css-loader/dist/cjs.js!./src/style.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack:///./src/style.css?");

/***/ }),

/***/ "./src/viewer.js":
/*!***********************!*\
  !*** ./src/viewer.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.core.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_addons_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! three/addons/controls/OrbitControls.js */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\n/* harmony import */ var nanobar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanobar */ \"./node_modules/nanobar/nanobar.js\");\n/* harmony import */ var nanobar__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanobar__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ccapture_js_build_CCapture_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ccapture.js/build/CCapture.min.js */ \"./node_modules/ccapture.js/build/CCapture.min.js\");\n/* harmony import */ var ccapture_js_build_CCapture_min_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ccapture_js_build_CCapture_min_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var webm_writer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! webm-writer */ \"./node_modules/webm-writer/browser.js\");\n/* harmony import */ var webm_writer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(webm_writer__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _axesCreater_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./axesCreater.js */ \"./src/axesCreater.js\");\n/* harmony import */ var _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shaderCompCallback.js */ \"./src/shaderCompCallback.js\");\n/* harmony import */ var _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helperFunc.js */ \"./src/helperFunc.js\");\n/* harmony import */ var _offProcessor_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./offProcessor.js */ \"./src/offProcessor.js\");\n/* harmony import */ var _offProcessor4D_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./offProcessor4D.js */ \"./src/offProcessor4D.js\");\n/* harmony import */ var _assets_models_Small_stellated_dodecahedron_off__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../assets/models/Small_stellated_dodecahedron.off */ \"./assets/models/Small_stellated_dodecahedron.off\");\n/* harmony import */ var _type_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./type.js */ \"./src/type.js\");\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./style.css */ \"./src/style.css\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n// 导入外部辅助函数和模块。\n\n\n\n\n\n // 默认加载的模型 URL\n\n\n// 导入样式。\n\nwindow.WebMWriter = (webm_writer__WEBPACK_IMPORTED_MODULE_2___default());\nwindow.download = function (data, filename, mimeType) {\n  var blob = new Blob([data], {\n    type: mimeType\n  });\n  var url = URL.createObjectURL(blob);\n  var a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n};\n\n/**\n * PolytopeRendererApp 类用于管理 THREE.js 场景、模型加载、用户交互和渲染循环。\n * 它将应用程序的所有状态和逻辑封装在一个单一的实例中。\n */\nvar PolytopeRendererApp = /*#__PURE__*/function () {\n  function PolytopeRendererApp() {\n    _classCallCheck(this, PolytopeRendererApp);\n    this.canvas = null;\n    this.faceVisibleSwitcher = null;\n    this.wireframeVisibleSwitcher = null;\n    this.verticesVisibleSwitcher = null;\n    this.axisVisibleSwitcher = null;\n    this.perspSwitcher = null;\n    this.schleSwitcher = null;\n    this.scaleFactorSlider = null;\n    this.faceOpacitySlider = null;\n    this.wireframeAndVerticesDimSlider = null;\n    this.projectionDistanceSlider = null;\n    this.fileInput = null;\n    this.uploadOffBtn = null;\n    this.infoDis = null;\n    this.progCon = null;\n    this.progDis = null;\n    this.nanobar = null;\n    this.startRecordBtn = null;\n    this.stopRecordBtn = null;\n    this.configFileInput = null;\n    this.rotationSliders = [];\n    this.scaleFactor = 1;\n    this.axesGroup = null;\n    this.solidGroup = null;\n    this.facesGroup = null;\n    this.wireframeGroup = null;\n    this.verticesGroup = null;\n    this.is4D = false;\n    this.rotAngles = [0, 0, 0, 0, 0, 0];\n    this.rotUni = {\n      value: new three__WEBPACK_IMPORTED_MODULE_11__.Matrix4()\n    };\n    this.ofsUni = {\n      value: new three__WEBPACK_IMPORTED_MODULE_11__.Vector4(0, 0, 0, 0)\n    };\n    this.ofs3Uni = {\n      value: new three__WEBPACK_IMPORTED_MODULE_11__.Vector3()\n    };\n    this.axesOffsetScaleUni = {\n      value: 1.0\n    };\n    this.projDistUni = {\n      value: 2.0\n    };\n    this.isOrthoUni = {\n      value: 0\n    };\n    this.cylinderRadiusUni = {\n      value: 0.5\n    };\n    this.sphereRadiusUni = {\n      value: 1.0\n    };\n    this.renderer = null;\n    this.isRenderingFlag = false;\n    this.scene = null;\n    this.camera = null;\n    this.controls = null;\n    this.loadMeshPromise = null;\n    this.capturer = null;\n    this.recordConfig = null;\n    this.recordStates = null;\n    this.isRecordingFlag = false;\n    this.stopRecordFlag = false;\n    this.init();\n  }\n\n  /**\n   * 初始化应用程序，按顺序调用其他初始化方法。\n   */\n  return _createClass(PolytopeRendererApp, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var initialMaterial;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this._initializeDomElements();\n              this._initializeRenderer();\n              this._initializeScene();\n              this._initializeCameras();\n              this._initializeLights();\n              this._initializeControls();\n              _context.next = 8;\n              return (0,_axesCreater_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.scene, this.rotUni, this.ofsUni, this.ofs3Uni, this.axesOffsetScaleUni);\n            case 8:\n              this.axesGroup = _context.sent;\n              initialMaterial = new three__WEBPACK_IMPORTED_MODULE_11__.MeshPhongMaterial({\n                color: 0x555555,\n                specular: 0x222222,\n                shininess: 50,\n                flatShading: true\n              });\n              _context.next = 12;\n              return this.loadMeshFromUrl(_assets_models_Small_stellated_dodecahedron_off__WEBPACK_IMPORTED_MODULE_8__, initialMaterial);\n            case 12:\n              this.updateEnable();\n              this.setupEventListeners();\n              this.startRenderLoop();\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * 获取所有必要的 DOM 元素并将其赋值给类属性。\n     */\n    )\n  }, {\n    key: \"_initializeDomElements\",\n    value: function _initializeDomElements() {\n      /* eslint-disable */\n      this.canvas = document.getElementById('polytopeRenderer');\n      this.faceVisibleSwitcher = document.getElementById('faceVisibleSwitcher');\n      this.wireframeVisibleSwitcher = document.getElementById('wireframeVisibleSwitcher');\n      this.verticesVisibleSwitcher = document.getElementById('verticesVisibleSwitcher');\n      this.axisVisibleSwitcher = document.getElementById('axisVisibleSwitcher');\n      this.perspSwitcher = document.getElementById('perspSwitcher');\n      this.schleSwitcher = document.getElementById('schleSwitcher');\n      this.scaleFactorSlider = document.getElementById('scaleFactorSlider');\n      this.faceOpacitySlider = document.getElementById('faceOpacitySlider');\n      this.wireframeAndVerticesDimSlider = document.getElementById('wireframeAndVerticesDimSlider');\n      this.projectionDistanceSlider = document.getElementById('projectionDistanceSlider');\n      this.fileInput = document.getElementById('fileInput');\n      this.uploadOffBtn = document.getElementById('uploadOff');\n      this.infoDis = document.getElementById('info');\n      this.progCon = document.getElementById('progContainer');\n      this.progDis = document.getElementById('prog');\n      this.startRecordBtn = document.getElementById('startRecord');\n      this.stopRecordBtn = document.getElementById('stopRecord');\n      this.configFileInput = document.getElementById('configFileInput');\n      /* eslint-enable */\n\n      this.rotationSliders = ['XY', 'XZ', 'XW', 'YZ', 'YW', 'ZW'].map(function (i) {\n        return document.getElementById(\"rot\".concat(i, \"Slider\"));\n      });\n    }\n\n    /**\n     * 初始化 WebGL 渲染器并设置其大小，同时监听窗口大小变化事件以调整渲染器。\n     */\n  }, {\n    key: \"_initializeRenderer\",\n    value: function _initializeRenderer() {\n      var _this = this;\n      var dpr = window.devicePixelRatio || 1;\n      this.renderer = new three__WEBPACK_IMPORTED_MODULE_12__.WebGLRenderer({\n        antialias: true,\n        powerPreference: 'high-performance',\n        canvas: this.canvas\n      });\n      var maxSize = Math.min(Math.min(window.innerWidth, window.innerHeight), 720);\n      this.renderer.setSize(maxSize * dpr, maxSize * dpr, false);\n      this.canvas.style.width = \"\".concat(maxSize, \"px\");\n      this.canvas.style.height = \"\".concat(maxSize, \"px\");\n      this.progCon.style.left = \"\".concat(maxSize / 2 + 8, \"px\");\n      this.progCon.style.top = \"\".concat(maxSize / 2 + 8, \"px\");\n      if (this.nanobar) this.nanobar.style.width = \"\".concat(maxSize * 0.7, \"px\");\n      window.addEventListener('resize', function () {\n        var newMaxSize = Math.min(Math.min(window.innerWidth, window.innerHeight), 720);\n        _this.renderer.setSize(newMaxSize * dpr, newMaxSize * dpr, false);\n        _this.canvas.style.width = \"\".concat(newMaxSize, \"px\");\n        _this.canvas.style.height = \"\".concat(newMaxSize, \"px\");\n        _this.progCon.style.left = \"\".concat(newMaxSize / 2 + 8, \"px\");\n        _this.progCon.style.top = \"\".concat(newMaxSize / 2 + 8, \"px\");\n        if (_this.nanobar) _this.nanobar.style.width = \"\".concat(newMaxSize * 0.7, \"px\");\n      });\n    }\n\n    /**\n     * 初始化 THREE.js 场景，设置背景颜色。\n     */\n  }, {\n    key: \"_initializeScene\",\n    value: function _initializeScene() {\n      this.scene = new three__WEBPACK_IMPORTED_MODULE_11__.Scene();\n      this.scene.background = new three__WEBPACK_IMPORTED_MODULE_11__.Color(0x111111);\n    }\n\n    /**\n     * 初始化透视相机和正交相机，并设置它们的初始位置。\n     */\n  }, {\n    key: \"_initializeCameras\",\n    value: function _initializeCameras() {\n      this.camera = new three__WEBPACK_IMPORTED_MODULE_11__.PerspectiveCamera(60, 1.0, 0.01, 500);\n      this.camera.position.set(0, 0, 120);\n    }\n\n    /**\n     * 向场景中添加方向光和环境光。\n     */\n  }, {\n    key: \"_initializeLights\",\n    value: function _initializeLights() {\n      var directionalLight = new three__WEBPACK_IMPORTED_MODULE_11__.DirectionalLight(0xffffff);\n      directionalLight.position.set(0.5, 0.6, 0.4).normalize();\n      directionalLight.intensity = 7;\n      directionalLight.castShadow = true;\n      directionalLight.shadow.mapSize.width = 2048;\n      directionalLight.shadow.mapSize.height = 2048;\n      this.scene.add(directionalLight);\n      var ambientLight = new three__WEBPACK_IMPORTED_MODULE_11__.AmbientLight(0x222222);\n      ambientLight.intensity = 100;\n      this.scene.add(ambientLight);\n      var backLight = new three__WEBPACK_IMPORTED_MODULE_11__.DirectionalLight(0xddddea, 0.9);\n      backLight.intensity = 8;\n      backLight.position.set(-0.5, -0.6, -0.4).normalize();\n      backLight.castShadow = true;\n      backLight.shadow.mapSize.width = 2048;\n      backLight.shadow.mapSize.height = 2048;\n      this.scene.add(backLight);\n    }\n\n    /**\n     * 初始化 TrackballControls 控制器，用于用户交互。\n     */\n  }, {\n    key: \"_initializeControls\",\n    value: function _initializeControls() {\n      this.controls = new three_addons_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_13__.OrbitControls(this.camera, this.renderer.domElement);\n      this.controls.enableDamping = true;\n      this.controls.dampingFactor = 0.8;\n      this.controls.enablePan = false;\n      this.controls.minDistance = 1.0;\n      this.controls.maxDistance = 150.0;\n      this.controls.minZoom = 0.7;\n      this.controls.maxZoom = 175.0;\n    }\n\n    /**\n     * THREE.js 渲染函数。\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.controls.update();\n      this.renderer.render(this.scene, this.camera);\n    }\n\n    /**\n     * 渲染循环函数。\n     */\n  }, {\n    key: \"renderLoop\",\n    value: function renderLoop() {\n      if (!this.isRenderingFlag) return;\n      this.render();\n      requestAnimationFrame(this.renderLoop.bind(this));\n    }\n\n    /**\n     * 开始渲染循环。\n     */\n  }, {\n    key: \"startRenderLoop\",\n    value: function startRenderLoop() {\n      if (this.isRenderingFlag) return;\n      this.isRenderingFlag = true;\n      this.renderLoop();\n    }\n\n    /**\n     * 停止渲染循环。\n     */\n  }, {\n    key: \"stopRenderLoop\",\n    value: function stopRenderLoop() {\n      if (!this.isRenderingFlag) return;\n      this.isRenderingFlag = false;\n    }\n\n    /**\n     * 为 3D 模型创建线框（圆柱体）和顶点（球体）的可视化表示。\n     * @param {Array<type.Edge3D>} edges - 边的数据，每个元素是一个包含起点和终点 THREE.Vector3 结构的对象数组。\n     * @param {object} options - 配置选项。\n     * @param {THREE.Material} [options.cylinderMaterial] - 用于圆柱体的 THREE.Material 实例。如果未提供，将使用默认材质。\n     * @param {THREE.Material} [options.sphereMaterial] - 用于球体的 THREE.Material 实例。如果未提供，将使用默认材质。\n     * @param {number} [options.cylinderColor] - 如果未提供 `cylinderMaterial`，圆柱体的十六进制颜色。\n     * @param {number} [options.sphereColor] - 如果未提供 `sphereMaterial`，球体的十六进制颜色。\n     * @returns {{wireframeGroup: THREE.Group, verticesGroup: THREE.Group}} 包含线框组和顶点组的对象。\n     */\n  }, {\n    key: \"createWireframeAndVertices\",\n    value: function createWireframeAndVertices(edges) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        cylinderMaterial = _ref.cylinderMaterial,\n        sphereMaterial = _ref.sphereMaterial,\n        _ref$cylinderColor = _ref.cylinderColor,\n        cylinderColor = _ref$cylinderColor === void 0 ? 0x777777 : _ref$cylinderColor,\n        _ref$sphereColor = _ref.sphereColor,\n        sphereColor = _ref$sphereColor === void 0 ? 0xffd700 : _ref$sphereColor;\n      var defaultCylinderMaterial = cylinderMaterial || new three__WEBPACK_IMPORTED_MODULE_11__.MeshStandardMaterial({\n        color: cylinderColor,\n        metalness: 0.9,\n        roughness: 0.3\n      });\n      var defaultSphereMaterial = sphereMaterial || new three__WEBPACK_IMPORTED_MODULE_11__.MeshStandardMaterial({\n        color: sphereColor,\n        metalness: 1.0,\n        roughness: 0.3\n      });\n      defaultCylinderMaterial = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].cylinderMaterial3D(defaultCylinderMaterial, this.cylinderRadiusUni, this.rotUni, this.ofs3Uni);\n      defaultSphereMaterial = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sphereMaterial3D(defaultSphereMaterial, this.sphereRadiusUni, this.rotUni, this.ofs3Uni);\n      var cylinderGeometry = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.toBufferGeometry(new three__WEBPACK_IMPORTED_MODULE_11__.CylinderGeometry(1, 1, 1, 16));\n      var cylinderInstances = new three__WEBPACK_IMPORTED_MODULE_11__.InstancedMesh(cylinderGeometry, defaultCylinderMaterial, edges.length);\n      var v1Arr = new Float32Array(edges.length * 3);\n      var v2Arr = new Float32Array(edges.length * 3);\n      var sphereGeometry = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.toBufferGeometry(new three__WEBPACK_IMPORTED_MODULE_11__.SphereGeometry(1, 16, 16));\n      var sphereInstances = new three__WEBPACK_IMPORTED_MODULE_11__.InstancedMesh(sphereGeometry, defaultSphereMaterial, edges.length * 2); // 最多可能需要边数×2的顶点\n      sphereInstances.count = 0; // 初始为0，后面会递增\n      var posArr = [];\n      var uniquePoints = new Set();\n      edges.forEach(function (_ref2, index) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n          start = _ref3[0],\n          end = _ref3[1];\n        var startKey = \"\".concat(start.x, \",\").concat(start.y, \",\").concat(start.z);\n        var endKey = \"\".concat(end.x, \",\").concat(end.y, \",\").concat(end.z);\n        var startVec = new three__WEBPACK_IMPORTED_MODULE_11__.Vector3(start.x, start.y, start.z);\n        var endVec = new three__WEBPACK_IMPORTED_MODULE_11__.Vector3(end.x, end.y, end.z);\n        v1Arr.set(startVec.toArray(), index * 3);\n        v2Arr.set(endVec.toArray(), index * 3);\n        if (!uniquePoints.has(startKey)) {\n          posArr.push.apply(posArr, _toConsumableArray(startVec.toArray()));\n          sphereInstances.count++;\n          uniquePoints.add(startKey);\n        }\n        if (!uniquePoints.has(endKey)) {\n          posArr.push.apply(posArr, _toConsumableArray(endVec.toArray()));\n          sphereInstances.count++;\n          uniquePoints.add(endKey);\n        }\n      });\n      cylinderInstances.instanceMatrix.needsUpdate = true;\n      sphereInstances.instanceMatrix.needsUpdate = true;\n      cylinderGeometry.setAttribute('v1', new three__WEBPACK_IMPORTED_MODULE_11__.InstancedBufferAttribute(v1Arr, 3));\n      cylinderGeometry.setAttribute('v2', new three__WEBPACK_IMPORTED_MODULE_11__.InstancedBufferAttribute(v2Arr, 3));\n      sphereGeometry.setAttribute('pos', new three__WEBPACK_IMPORTED_MODULE_11__.InstancedBufferAttribute(new Float32Array(posArr), 3));\n      var wireframeGroup = new three__WEBPACK_IMPORTED_MODULE_11__.Group();\n      var verticesGroup = new three__WEBPACK_IMPORTED_MODULE_11__.Group();\n      wireframeGroup.add(cylinderInstances);\n      verticesGroup.add(sphereInstances);\n      return {\n        wireframeGroup: wireframeGroup,\n        verticesGroup: verticesGroup\n      };\n    }\n\n    /**\n     * 为 4D 模型创建线框（圆柱体）和顶点（球体）的可视化表示。\n     * @param {Array<type.Edge4D>} edges - 边的数据，每个元素是一个包含起点和终点（带有 w 坐标）的对象数组。\n     * @param {object} options - 配置选项。\n     * @param {THREE.Material} [options.cylinderMaterial] - 用于圆柱体的 THREE.Material 实例。如果未提供，将使用默认材质。\n     * @param {THREE.Material} [options.sphereMaterial] - 用于球体的 THREE.Material 实例。如果未提供，将使用默认材质。\n     * @param {number} [options.cylinderColor] - 如果未提供 `cylinderMaterial`，圆柱体的十六进制颜色。\n     * @param {number} [options.sphereColor] - 如果未提供 `sphereMaterial`，球体的十六进制颜色。\n     * @returns {{wireframeGroup: THREE.Group, verticesGroup: THREE.Group}} 包含线框组和顶点组的对象。\n     */\n  }, {\n    key: \"create4DWireframeAndVertices\",\n    value: function create4DWireframeAndVertices(edges) {\n      var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        cylinderMaterial = _ref4.cylinderMaterial,\n        sphereMaterial = _ref4.sphereMaterial,\n        _ref4$cylinderColor = _ref4.cylinderColor,\n        cylinderColor = _ref4$cylinderColor === void 0 ? 0x777777 : _ref4$cylinderColor,\n        _ref4$sphereColor = _ref4.sphereColor,\n        sphereColor = _ref4$sphereColor === void 0 ? 0xffd700 : _ref4$sphereColor;\n      var defaultCylinderMaterial = cylinderMaterial || new three__WEBPACK_IMPORTED_MODULE_11__.MeshStandardMaterial({\n        color: cylinderColor,\n        metalness: 0.9,\n        roughness: 0.3\n      });\n      var defaultSphereMaterial = sphereMaterial || new three__WEBPACK_IMPORTED_MODULE_11__.MeshStandardMaterial({\n        color: sphereColor,\n        metalness: 1.0,\n        roughness: 0.3\n      });\n      defaultCylinderMaterial = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].cylinderMaterial(defaultCylinderMaterial, this.cylinderRadiusUni, this.rotUni, this.ofsUni, this.ofs3Uni, this.projDistUni, this.isOrthoUni);\n      defaultSphereMaterial = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sphereMaterial(defaultSphereMaterial, this.sphereRadiusUni, this.rotUni, this.ofsUni, this.ofs3Uni, this.projDistUni, this.isOrthoUni);\n      var wireframeGroup = new three__WEBPACK_IMPORTED_MODULE_11__.Group();\n      var verticesGroup = new three__WEBPACK_IMPORTED_MODULE_11__.Group();\n      var uniquePoints = new Set();\n      var v1Arr = new Float32Array(edges.length * 4);\n      var v2Arr = new Float32Array(edges.length * 4);\n      var vertexSpheresPosArr = [];\n      edges.forEach(function (_ref5, i) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n          start = _ref6[0],\n          end = _ref6[1];\n        var startKey = \"\".concat(start.x, \",\").concat(start.y, \",\").concat(start.z, \",\").concat(start.w);\n        var endKey = \"\".concat(end.x, \",\").concat(end.y, \",\").concat(end.z, \",\").concat(end.w);\n        v1Arr.set(Object.values(start), i * 4);\n        v2Arr.set(Object.values(end), i * 4);\n        if (!uniquePoints.has(startKey)) {\n          vertexSpheresPosArr.push(Object.values(start));\n          uniquePoints.add(startKey);\n        }\n        if (!uniquePoints.has(endKey)) {\n          vertexSpheresPosArr.push(Object.values(end));\n          uniquePoints.add(endKey);\n        }\n      });\n      var cylinderGeometry = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.toBufferGeometry(new three__WEBPACK_IMPORTED_MODULE_11__.CylinderGeometry(1, 1, 1, 16));\n      cylinderGeometry.setAttribute('v1', new three__WEBPACK_IMPORTED_MODULE_11__.InstancedBufferAttribute(v1Arr, 4));\n      cylinderGeometry.setAttribute('v2', new three__WEBPACK_IMPORTED_MODULE_11__.InstancedBufferAttribute(v2Arr, 4));\n      var instancedCylinderMesh = new three__WEBPACK_IMPORTED_MODULE_11__.InstancedMesh(cylinderGeometry, defaultCylinderMaterial, edges.length);\n      wireframeGroup.add(instancedCylinderMesh);\n      var sphereGeometry = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.toBufferGeometry(new three__WEBPACK_IMPORTED_MODULE_11__.SphereGeometry(1, 16, 16));\n      sphereGeometry.setAttribute('center4D', new three__WEBPACK_IMPORTED_MODULE_11__.InstancedBufferAttribute(new Float32Array(vertexSpheresPosArr.flat()), 4));\n      var instancedSphereMesh = new three__WEBPACK_IMPORTED_MODULE_11__.InstancedMesh(sphereGeometry, defaultSphereMaterial, vertexSpheresPosArr.length);\n      verticesGroup.add(instancedSphereMesh);\n      return {\n        wireframeGroup: wireframeGroup,\n        verticesGroup: verticesGroup\n      };\n    }\n\n    /**\n     * 加载并显示 3D 网格模型。\n     * @param {type.Mesh3D} meshData - 3D 网格数据。\n     * @param {THREE.Material} material - 用于模型面的 THREE.Material 实例。\n     * @returns {{scaleFactor: number, solidGroup: THREE.Object3D, facesGroup: THREE.Mesh, wireframeGroup: THREE.Group, verticesGroup: THREE.Group}} 包含模型相关 THREE.js 对象的引用和计算出的缩放因子。\n     */\n  }, {\n    key: \"loadMesh\",\n    value: function loadMesh(meshData, material) {\n      var container = new three__WEBPACK_IMPORTED_MODULE_11__.Object3D();\n      var geometry = new three__WEBPACK_IMPORTED_MODULE_11__.BufferGeometry();\n      var vertices = new Float32Array(meshData.vertices.length * 3);\n      meshData.vertices.forEach(function (v, i) {\n        vertices[i * 3] = v.x;\n        vertices[i * 3 + 1] = v.y;\n        vertices[i * 3 + 2] = v.z;\n      });\n      geometry.setAttribute('position', new three__WEBPACK_IMPORTED_MODULE_11__.BufferAttribute(vertices, 3));\n      var indices = [];\n      meshData.faces.forEach(function (face) {\n        return indices.push.apply(indices, _toConsumableArray(face));\n      });\n      geometry.setIndex(indices);\n      geometry.computeVertexNormals();\n      material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].faceMaterial3D(material, this.rotUni, this.ofs3Uni);\n      var mesh = new three__WEBPACK_IMPORTED_MODULE_11__.Mesh(geometry, material);\n      mesh.material.side = three__WEBPACK_IMPORTED_MODULE_11__.DoubleSide;\n      this.updateScaleFactor(40 / _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.getFarthestPointDist(meshData.vertices));\n      var _this$createWireframe = this.createWireframeAndVertices(meshData.edges),\n        wireframeGroup = _this$createWireframe.wireframeGroup,\n        verticesGroup = _this$createWireframe.verticesGroup;\n      container.add(mesh);\n      container.add(wireframeGroup);\n      container.add(verticesGroup);\n      container.scale.setScalar(this.scaleFactor);\n      this.scene.add(container);\n      return {\n        scaleFactor: this.scaleFactor,\n        solidGroup: container,\n        facesGroup: mesh,\n        wireframeGroup: wireframeGroup,\n        verticesGroup: verticesGroup\n      };\n    }\n\n    /**\n     * 加载并显示 4D 网格模型。\n     * @param {type.Mesh4D} meshData - 4D 网格数据。\n     * @param {THREE.Material} material - 用于模型面的 THREE.Material 实例。\n     * @returns {{scaleFactor: number, solidGroup: THREE.Object3D, facesGroup: THREE.Mesh, wireframeGroup: THREE.Group, verticesGroup: THREE.Group}} 包含模型相关 THREE.js 对象的引用和计算出的缩放因子。\n     */\n  }, {\n    key: \"load4DMesh\",\n    value: function load4DMesh(meshData, material) {\n      var _this2 = this;\n      var container = new three__WEBPACK_IMPORTED_MODULE_11__.Object3D();\n      var geometry = new three__WEBPACK_IMPORTED_MODULE_11__.BufferGeometry();\n\n      // position 属性在这里没有实际作用，但必须设置以防止着色器报错。\n      var vertices = new Float32Array(meshData.vertices.length * 3);\n      meshData.vertices.forEach(function (v, i) {\n        vertices[i * 3] = v.x;\n        vertices[i * 3 + 1] = v.y;\n        vertices[i * 3 + 2] = v.z;\n      });\n      geometry.setAttribute('position', new three__WEBPACK_IMPORTED_MODULE_11__.BufferAttribute(vertices, 3));\n      var vertices4D = new Float32Array(meshData.vertices.length * 4);\n      meshData.vertices.forEach(function (v, i) {\n        vertices4D[i * 4] = v.x;\n        vertices4D[i * 4 + 1] = v.y;\n        vertices4D[i * 4 + 2] = v.z;\n        vertices4D[i * 4 + 3] = v.w;\n      });\n      geometry.setAttribute('position4D', new three__WEBPACK_IMPORTED_MODULE_11__.BufferAttribute(vertices4D, 4));\n      var indices = [];\n      meshData.faces.forEach(function (face) {\n        return indices.push.apply(indices, _toConsumableArray(face));\n      });\n      geometry.setIndex(indices);\n      geometry.computeVertexNormals();\n      var mesh = new three__WEBPACK_IMPORTED_MODULE_11__.Mesh(geometry, material);\n      mesh.material.side = three__WEBPACK_IMPORTED_MODULE_11__.DoubleSide;\n      this.projectionDistanceSlider.value = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.getFarthest4DPointDist(meshData.vertices) * 1.05;\n      this.updateProjectionDistance();\n      this.updateScaleFactor(40 / _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.getFarthestPointDist(meshData.vertices.map(function (p) {\n        if (!_this2.schleSwitcher.checked) return {\n          x: p.x,\n          y: p.y,\n          z: p.z\n        };\n        var d = +_this2.projectionDistanceSlider.value;\n        var s = d / (d + p.w);\n        return {\n          x: p.x * s,\n          y: p.y * s,\n          z: p.z * s\n        };\n      })));\n      var _this$create4DWirefra = this.create4DWireframeAndVertices(meshData.edges),\n        wireframeGroup = _this$create4DWirefra.wireframeGroup,\n        verticesGroup = _this$create4DWirefra.verticesGroup;\n      container.add(mesh);\n      container.add(wireframeGroup);\n      container.add(verticesGroup);\n      container.scale.setScalar(this.scaleFactor);\n      this.scene.add(container);\n      return {\n        scaleFactor: this.scaleFactor,\n        solidGroup: container,\n        facesGroup: mesh,\n        wireframeGroup: wireframeGroup,\n        verticesGroup: verticesGroup\n      };\n    }\n\n    /**\n     * 使用 WebWorker 异步处理网格数据。\n     * @param {(type.NonTriMesh3D|type.NonTriMesh4D)} meshData - 3D / 4D 网格数据。\n     * @param {boolean} is4D - 是否为 4D 网格。\n     * @returns {object} 包含 Promise 和 abort 方法的对象。\n     * @property {Promise<(type.Mesh3D|type.Mesh4D)>} promise - 处理结果的 Promise，成功时返回处理完成的数据，失败时返回错误信息。\n     * @property {Function} abort - 中止处理的方法，会终止 Worker 并清理资源。\n     */\n  }, {\n    key: \"processMeshData\",\n    value: function processMeshData(meshData) {\n      var _this3 = this;\n      var is4D = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var bar = new (nanobar__WEBPACK_IMPORTED_MODULE_0___default())({\n        target: this.progCon\n      });\n      var controller = new AbortController();\n      var worker = new Worker(new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(\"src_processMeshData_worker_js\"), __webpack_require__.b));\n      this.nanobar = bar.el;\n      bar.el.style.position = 'static';\n      var promise = new Promise(function (resolve, reject) {\n        worker.postMessage({\n          meshData: meshData,\n          is4D: is4D\n        });\n        worker.addEventListener('message', function (event) {\n          var _event$data = event.data,\n            type = _event$data.type,\n            data = _event$data.data;\n          switch (type) {\n            case 'progress':\n              _this3.progDis.innerHTML = \"\".concat(data.progress.toFixed(2), \"%<br />\\uFF08\").concat(data.current, \"/\").concat(data.total, \"\\uFF09\");\n              bar.go(data.progress);\n              break;\n            case 'complete':\n              worker.terminate();\n              _this3.progDis.innerText = '';\n              bar.el.remove();\n              _this3.loadMeshPromise = null;\n              _this3.nanobar = null;\n              resolve(data);\n              break;\n            case 'error':\n              worker.terminate();\n              _this3.progDis.innerText = '';\n              bar.el.remove();\n              _this3.loadMeshPromise = null;\n              _this3.nanobar = null;\n              reject(data);\n              break;\n          }\n        });\n      });\n      return {\n        promise: promise,\n        abort: function abort() {\n          controller.abort();\n          worker.terminate();\n          _this3.progDis.innerText = '';\n          bar.el.remove();\n          _this3.loadMeshPromise = null;\n          _this3.nanobar = null;\n        }\n      };\n    }\n\n    /**\n     * 从 OFF 格式的字符串数据加载 3D 网格模型。\n     * @param {string} data - OFF 格式的字符串数据。\n     * @param {THREE.Material} material - 用于模型面的 THREE.Material 实例。\n     */\n  }, {\n    key: \"loadMeshFromOffData\",\n    value: (function () {\n      var _loadMeshFromOffData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data, material) {\n        var mesh, processedMesh, info, _this$loadMesh, scaleFactor, solidGroup, facesGroup, wireframeGroup, verticesGroup;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (this.loadMeshPromise) this.loadMeshPromise.abort();\n              mesh = (0,_offProcessor_js__WEBPACK_IMPORTED_MODULE_6__.parseOFF)(data);\n              this.loadMeshPromise = this.processMeshData(mesh);\n              _context2.next = 5;\n              return this.loadMeshPromise.promise;\n            case 5:\n              processedMesh = _context2.sent;\n              info = \"\\n    \\u9876\\u70B9\\u6570\\uFF1A\".concat(mesh.vertices.length, \"\\n    \\u8FB9\\u6570\\uFF1A\").concat(mesh.edges.length, \"\\n    \\u9762\\u6570\\uFF1A\").concat(mesh.faces.length, \"\\n    \").trim().replace(' ', '');\n              this.infoDis.innerText = info;\n              _this$loadMesh = this.loadMesh(processedMesh, material), scaleFactor = _this$loadMesh.scaleFactor, solidGroup = _this$loadMesh.solidGroup, facesGroup = _this$loadMesh.facesGroup, wireframeGroup = _this$loadMesh.wireframeGroup, verticesGroup = _this$loadMesh.verticesGroup;\n              this.scaleFactor = scaleFactor;\n              this.solidGroup = solidGroup;\n              this.facesGroup = facesGroup;\n              this.wireframeGroup = wireframeGroup;\n              this.verticesGroup = verticesGroup;\n              this.updateProperties();\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function loadMeshFromOffData(_x, _x2) {\n        return _loadMeshFromOffData.apply(this, arguments);\n      }\n      return loadMeshFromOffData;\n    }()\n    /**\n     * 从 4OFF 格式的字符串数据加载 4D 网格模型。\n     * @param {string} data - 4OFF 格式的字符串数据。\n     * @param {THREE.Material} material - 用于模型面的 THREE.Material 实例。\n     */\n    )\n  }, {\n    key: \"loadMeshFrom4OffData\",\n    value: (function () {\n      var _loadMeshFrom4OffData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data, material) {\n        var mesh, processedMesh, info, _this$load4DMesh, scaleFactor, solidGroup, facesGroup, wireframeGroup, verticesGroup;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this.loadMeshPromise) this.loadMeshPromise.abort();\n              mesh = (0,_offProcessor4D_js__WEBPACK_IMPORTED_MODULE_7__.parse4OFF)(data);\n              this.loadMeshPromise = this.processMeshData(mesh, true);\n              _context3.next = 5;\n              return this.loadMeshPromise.promise;\n            case 5:\n              processedMesh = _context3.sent;\n              info = \"\\n    \\u9876\\u70B9\\u6570\\uFF1A\".concat(mesh.vertices.length, \"\\n    \\u8FB9\\u6570\\uFF1A\").concat(mesh.edges.length, \"\\n    \\u9762\\u6570\\uFF1A\").concat(mesh.faces.length, \"\\n    \\u80DE\\u6570\\uFF1A\").concat(mesh.cells.length, \"\\n    \").trim().replace(' ', '');\n              this.infoDis.innerText = info;\n              material = _shaderCompCallback_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].faceMaterial(material, this.rotUni, this.ofsUni, this.ofs3Uni, this.projDistUni, this.isOrthoUni);\n              _this$load4DMesh = this.load4DMesh(processedMesh, material), scaleFactor = _this$load4DMesh.scaleFactor, solidGroup = _this$load4DMesh.solidGroup, facesGroup = _this$load4DMesh.facesGroup, wireframeGroup = _this$load4DMesh.wireframeGroup, verticesGroup = _this$load4DMesh.verticesGroup;\n              this.scaleFactor = scaleFactor;\n              this.solidGroup = solidGroup;\n              this.facesGroup = facesGroup;\n              this.wireframeGroup = wireframeGroup;\n              this.verticesGroup = verticesGroup;\n              this.updateProperties();\n              this.updateProjectionDistance();\n              this.updateRotation();\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function loadMeshFrom4OffData(_x3, _x4) {\n        return _loadMeshFrom4OffData.apply(this, arguments);\n      }\n      return loadMeshFrom4OffData;\n    }()\n    /**\n     * 从指定的 URL 异步加载模型数据。\n     * @param {string} url - 模型的 URL。\n     * @param {THREE.Material} material - 用于模型面的 THREE.Material 实例。\n     * @returns {Promise<void>} 一个 Promise，在模型加载完成后解析。\n     */\n    )\n  }, {\n    key: \"loadMeshFromUrl\",\n    value: (function () {\n      var _loadMeshFromUrl = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(url, material) {\n        var _this4 = this;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              return _context5.abrupt(\"return\", new Promise(function (resolve) {\n                fetch(url).then(function (response) {\n                  if (!response.ok) {\n                    throw new Error('网络响应不正常');\n                  }\n                  return response.text();\n                }).then(/*#__PURE__*/function () {\n                  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data) {\n                    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                      while (1) switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return _this4.loadMeshFromOffData(data, material);\n                        case 2:\n                          resolve();\n                        case 3:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }, _callee4);\n                  }));\n                  return function (_x7) {\n                    return _ref7.apply(this, arguments);\n                  };\n                }());\n              }));\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n      function loadMeshFromUrl(_x5, _x6) {\n        return _loadMeshFromUrl.apply(this, arguments);\n      }\n      return loadMeshFromUrl;\n    }()\n    /**\n     * 根据 UI 控件的状态更新模型的可见性、面不透明度、Uniform 值、摄像头模式以及线框和顶点的尺寸。\n     */\n    )\n  }, {\n    key: \"updateProperties\",\n    value: function updateProperties() {\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.facesGroup, 'visible', this.faceVisibleSwitcher.checked);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.wireframeGroup, 'visible', this.wireframeVisibleSwitcher.checked);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.verticesGroup, 'visible', this.verticesVisibleSwitcher.checked);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.axesGroup, 'visible', this.axisVisibleSwitcher.checked);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.facesGroup, 'opacity', +this.faceOpacitySlider.value);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.facesGroup, 'transparent', +this.faceOpacitySlider.value !== 1);\n      this.toggleCamera(this.perspSwitcher.checked);\n      this.cylinderRadiusUni.value = +this.wireframeAndVerticesDimSlider.value / this.scaleFactor;\n      this.sphereRadiusUni.value = +this.wireframeAndVerticesDimSlider.value / this.scaleFactor * 2;\n      this.ofsUni.value = new three__WEBPACK_IMPORTED_MODULE_11__.Vector4(0, 0, 0, 0);\n      this.ofs3Uni.value = new three__WEBPACK_IMPORTED_MODULE_11__.Vector3();\n    }\n\n    /**\n     * 更新用于 4D 投影距离的 Uniform 变量。\n     */\n  }, {\n    key: \"updateProjectionDistance\",\n    value: function updateProjectionDistance() {\n      this.projDistUni.value = +this.projectionDistanceSlider.value;\n    }\n\n    /**\n     * 更新旋转 Uniform 变量，并在 3D 模式下直接修改 solidGroup 的旋转。\n     */\n  }, {\n    key: \"updateRotation\",\n    value: function updateRotation() {\n      var rotations = this.rotationSliders.map(function (i) {\n        return +i.value;\n      });\n      this.rotAngles = rotations;\n      this.rotUni.value = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.create4DRotationMat.apply(_helperFunc_js__WEBPACK_IMPORTED_MODULE_5__, _toConsumableArray(this.rotAngles));\n    }\n\n    /**\n     * 更新缩放因子。\n     * @param {number} scaleFactor - 缩放因子。\n     */\n  }, {\n    key: \"updateScaleFactor\",\n    value: function updateScaleFactor(scaleFactor) {\n      this.scaleFactor = scaleFactor;\n      this.scaleFactorSlider.value = scaleFactor;\n      this.cylinderRadiusUni.value = +this.wireframeAndVerticesDimSlider.value / scaleFactor;\n      this.sphereRadiusUni.value = +this.wireframeAndVerticesDimSlider.value / scaleFactor * 2;\n      if (this.solidGroup) this.solidGroup.scale.setScalar(scaleFactor);\n      this.axesOffsetScaleUni.value = scaleFactor;\n    }\n\n    /**\n     * 更新 UI 控件可用状态。\n     * @param {boolean} enable - true 表示启用，false 表示禁用。\n     */\n  }, {\n    key: \"updateEnable\",\n    value: function updateEnable() {\n      var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      /**\n       * 禁用或启用页面上所有的 input 和 button 元素。\n       * @param {boolean} enable - true 表示启用，false 表示禁用。\n       */\n      var _toggleInputsAndButtons = function _toggleInputsAndButtons(enable) {\n        var elements = document.querySelectorAll('input, button');\n        elements.forEach(function (element) {\n          element.disabled = !enable;\n        });\n      };\n      _toggleInputsAndButtons(enable);\n      this.stopRecordBtn.disabled = !this.isRecordingFlag;\n      if (!enable) return;\n      this.projectionDistanceSlider.disabled = true;\n      if (!this.schleSwitcher.disabled && !this.is4D) {\n        this.rotationSliders[2].value = 0;\n        this.rotationSliders[4].value = 0;\n        this.rotationSliders[5].value = 0;\n        this.updateRotation();\n      }\n      this.projectionDistanceSlider.disabled = !this.is4D;\n      this.schleSwitcher.disabled = !this.is4D;\n      this.rotationSliders[2].disabled = !this.is4D;\n      this.rotationSliders[4].disabled = !this.is4D;\n      this.rotationSliders[5].disabled = !this.is4D;\n      this.startRecordBtn.disabled = this.isRecordingFlag;\n    }\n\n    /**\n     * 切换当前使用的摄像机类型（透视或正交），并保持其位置和方向。\n     * @param {boolean} isPersp - 是否使用透视相机（否则正交）。\n     */\n  }, {\n    key: \"toggleCamera\",\n    value: function toggleCamera(isPersp) {\n      var oldCamera = this.camera.clone();\n      if (isPersp) {\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_11__.PerspectiveCamera(60, 1.0, 0.01, 500);\n      } else {\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_11__.OrthographicCamera(-60, 60, 60, -60, 0.01, 500);\n      }\n      this.camera.position.copy(oldCamera.position);\n      this.camera.rotation.copy(oldCamera.rotation);\n      this._initializeControls();\n    }\n\n    /**\n     * 设置所有 UI 元素的事件监听器。\n     * 使用箭头函数或 bind(this) 确保方法内部的 this 正确指向类实例。\n     */\n  }, {\n    key: \"setupEventListeners\",\n    value: function setupEventListeners() {\n      var _this5 = this;\n      this.faceVisibleSwitcher.addEventListener('change', function () {\n        return _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(_this5.facesGroup, 'visible', _this5.faceVisibleSwitcher.checked);\n      });\n      this.wireframeVisibleSwitcher.addEventListener('change', function () {\n        return _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(_this5.wireframeGroup, 'visible', _this5.wireframeVisibleSwitcher.checked);\n      });\n      this.verticesVisibleSwitcher.addEventListener('change', function () {\n        return _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(_this5.verticesGroup, 'visible', _this5.verticesVisibleSwitcher.checked);\n      });\n      this.axisVisibleSwitcher.addEventListener('change', function () {\n        return _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(_this5.axesGroup, 'visible', _this5.axisVisibleSwitcher.checked);\n      });\n      this.scaleFactorSlider.addEventListener('input', function () {\n        return _this5.updateScaleFactor(+_this5.scaleFactorSlider.value);\n      });\n      this.faceOpacitySlider.addEventListener('input', function () {\n        _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(_this5.facesGroup, 'opacity', +_this5.faceOpacitySlider.value);\n        _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(_this5.facesGroup, 'transparent', +_this5.faceOpacitySlider.value !== 1);\n      });\n      this.wireframeAndVerticesDimSlider.addEventListener('input', function () {\n        _this5.cylinderRadiusUni.value = +_this5.wireframeAndVerticesDimSlider.value / _this5.scaleFactor;\n        _this5.sphereRadiusUni.value = +_this5.wireframeAndVerticesDimSlider.value / _this5.scaleFactor * 2;\n      });\n      this.projectionDistanceSlider.addEventListener('input', this.updateProjectionDistance.bind(this));\n      this.rotationSliders.forEach(function (slider, i) {\n        slider.addEventListener('input', function () {\n          _this5.rotAngles[i] = +slider.value;\n          _this5.rotUni.value = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.create4DRotationMat.apply(_helperFunc_js__WEBPACK_IMPORTED_MODULE_5__, _toConsumableArray(_this5.rotAngles));\n        });\n      });\n      this.perspSwitcher.addEventListener('change', function () {\n        return _this5.toggleCamera(_this5.perspSwitcher.checked);\n      });\n      this.schleSwitcher.addEventListener('change', function () {\n        return _this5.isOrthoUni.value = !_this5.schleSwitcher.checked;\n      });\n      this.uploadOffBtn.addEventListener('click', function () {\n        return _this5.fileInput.click();\n      });\n      this.fileInput.addEventListener('change', this.handleFileInputChange.bind(this));\n      this.startRecordBtn.addEventListener('click', this.startRecord.bind(this));\n      this.stopRecordBtn.addEventListener('click', function () {\n        return _this5.stopRecordFlag = true;\n      });\n    }\n\n    /**\n     * 处理文件输入元素的选择事件，读取文件内容并加载相应的 3D 或 4D 模型。\n     * @param {Event} e - 文件输入事件对象。\n     */\n  }, {\n    key: \"handleFileInputChange\",\n    value: function handleFileInputChange(e) {\n      var _this6 = this;\n      var file = e.target.files[0];\n      if (!file) return;\n      var reader = new FileReader();\n      reader.onload = /*#__PURE__*/function () {\n        var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(e) {\n          var data, material;\n          return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                data = e.target.result;\n                if (_this6.solidGroup) {\n                  _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.disposeGroup(_this6.solidGroup);\n                  _this6.scene.remove(_this6.solidGroup);\n                }\n                _this6.is4D = data.split('\\n').filter(function (line) {\n                  return line.trim() !== '' && !line.startsWith('#');\n                })[0].trim() === '4OFF';\n                material = new three__WEBPACK_IMPORTED_MODULE_11__.MeshPhongMaterial({\n                  color: 0x555555,\n                  specular: 0x222222,\n                  shininess: 50,\n                  flatShading: true\n                });\n                if (!_this6.is4D) {\n                  _context6.next = 9;\n                  break;\n                }\n                _context6.next = 7;\n                return _this6.loadMeshFrom4OffData(data, material);\n              case 7:\n                _context6.next = 11;\n                break;\n              case 9:\n                _context6.next = 11;\n                return _this6.loadMeshFromOffData(data, material);\n              case 11:\n                _this6.updateEnable();\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }, _callee6);\n        }));\n        return function (_x8) {\n          return _ref8.apply(this, arguments);\n        };\n      }();\n      reader.readAsText(file);\n    }\n\n    /**\n     * 开始录制视频。\n     */\n  }, {\n    key: \"startRecord\",\n    value: (function () {\n      var _startRecord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var _this$recordConfig$in,\n          _this$recordConfig$in2,\n          _this$recordConfig$in3,\n          _this$recordConfig$in4,\n          _this$recordConfig$in5,\n          _this7 = this;\n        var totalFrames, frameIndex, _onStopRender, _renderLoop2;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              _context7.next = 3;\n              return _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.parseJsonFileFromInput(this.configFileInput);\n            case 3:\n              this.recordConfig = _context7.sent;\n              _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.validateRecordConfig(this.recordConfig, this.is4D);\n              _context7.next = 12;\n              break;\n            case 7:\n              _context7.prev = 7;\n              _context7.t0 = _context7[\"catch\"](0);\n              alert(_context7.t0.message);\n              console.error(_context7.t0);\n              return _context7.abrupt(\"return\");\n            case 12:\n              this.isRecordingFlag = true;\n              this.updateEnable(false);\n              this.recordStates = {\n                rots: {\n                  Infinity: this.recordConfig.initialRot ? _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.create4DRotationMat.apply(_helperFunc_js__WEBPACK_IMPORTED_MODULE_5__, _toConsumableArray(this.recordConfig.initialRot)) : this.rotUni.value\n                },\n                ofs: this.recordConfig.initialOfs ? _construct(three__WEBPACK_IMPORTED_MODULE_11__.Vector4, _toConsumableArray(this.recordConfig.initialOfs)) : this.ofsUni.value,\n                ofs3: this.recordConfig.initialOfs3 ? _construct(three__WEBPACK_IMPORTED_MODULE_11__.Vector3, _toConsumableArray(this.recordConfig.initialOfs3)) : this.ofs3Uni.value,\n                verticesEdgesDim: (_this$recordConfig$in = this.recordConfig.initialVerticesEdgesDim) !== null && _this$recordConfig$in !== void 0 ? _this$recordConfig$in : this.cylinderRadiusUni.value * this.scaleFactor,\n                projDist: (_this$recordConfig$in2 = this.recordConfig.initialProjDist) !== null && _this$recordConfig$in2 !== void 0 ? _this$recordConfig$in2 : this.projDistUni.value,\n                faceOpacity: (_this$recordConfig$in3 = this.recordConfig.initialFaceOpacity) !== null && _this$recordConfig$in3 !== void 0 ? _this$recordConfig$in3 : +this.faceOpacitySlider.value,\n                visibilities: (_this$recordConfig$in4 = this.recordConfig.initialVisibilities) !== null && _this$recordConfig$in4 !== void 0 ? _this$recordConfig$in4 : {\n                  faces: this.faceVisibleSwitcher.checked,\n                  wireframe: this.wireframeVisibleSwitcher.checked,\n                  vertices: this.verticesVisibleSwitcher.checked,\n                  axes: this.axisVisibleSwitcher.checked\n                },\n                cameraIsPersp: this.recordConfig.initialCameraProjMethod ? this.recordConfig.initialCameraProjMethod === 'persp' : this.perspSwitcher.checked,\n                schleProjEnable: (_this$recordConfig$in5 = this.recordConfig.initialSchleProjEnable) !== null && _this$recordConfig$in5 !== void 0 ? _this$recordConfig$in5 : !this.isOrthoUni.value\n              };\n              totalFrames = Math.max.apply(Math, _toConsumableArray(this.recordConfig.actions.map(function (i, index) {\n                var _ref9, _i$end;\n                i.index = index;\n                return (_ref9 = (_i$end = i.end) !== null && _i$end !== void 0 ? _i$end : i.at) !== null && _ref9 !== void 0 ? _ref9 : -1;\n              })));\n              this.rotAngles = [0, 0, 0, 0, 0, 0];\n              this.rotUni.value = new three__WEBPACK_IMPORTED_MODULE_11__.Matrix4();\n              this.stopRenderLoop();\n              this.controls.dispose();\n              this.capturer = new (ccapture_js_build_CCapture_min_js__WEBPACK_IMPORTED_MODULE_1___default())({\n                format: 'webm',\n                framerate: 30,\n                name: 'Animation',\n                verbose: true\n              });\n              this.capturer.start();\n              frameIndex = 0;\n              /**\n               * 渲染终止后的动作。\n               * @param {boolean} byError - 是否因错误终止，为 true 时不保存视频。\n               */\n              _onStopRender = function _onStopRender() {\n                var byError = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n                _this7.capturer.stop();\n                if (!byError) _this7.capturer.save();\n                _this7.capturer = null;\n                _this7.isRecordingFlag = false;\n                _this7.updateProperties();\n                _this7.updateProjectionDistance();\n                _this7.updateRotation();\n                _this7._initializeControls();\n                _this7.startRenderLoop();\n                _this7.updateEnable();\n              };\n              /**\n               * （视频）渲染循环。\n               */\n              _renderLoop2 = function _renderLoop() {\n                if (frameIndex >= totalFrames || _this7.stopRecordFlag) {\n                  _onStopRender();\n                  _this7.stopRecordFlag = false;\n                  return;\n                }\n                try {\n                  _this7.genFrame(frameIndex);\n                  _this7.capturer.capture(_this7.canvas);\n                } catch (e) {\n                  alert(e.message);\n                  _onStopRender(true);\n                  console.error(e);\n                  return;\n                }\n                frameIndex++;\n                requestAnimationFrame(_renderLoop2);\n              };\n              _renderLoop2();\n            case 26:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this, [[0, 7]]);\n      }));\n      function startRecord() {\n        return _startRecord.apply(this, arguments);\n      }\n      return startRecord;\n    }()\n    /**\n     * 渲染一帧。\n     * @param {number} frameIndex - 帧索引。\n     */\n    )\n  }, {\n    key: \"genFrame\",\n    value: function genFrame(frameIndex) {\n      var _visibilities$faces, _visibilities$wirefra, _visibilities$vertice, _visibilities$axes;\n      this.updateRecordStates(frameIndex);\n      var _this$recordStates = this.recordStates,\n        rots = _this$recordStates.rots,\n        ofs = _this$recordStates.ofs,\n        ofs3 = _this$recordStates.ofs3,\n        verticesEdgesDim = _this$recordStates.verticesEdgesDim,\n        projDist = _this$recordStates.projDist,\n        faceOpacity = _this$recordStates.faceOpacity,\n        visibilities = _this$recordStates.visibilities,\n        cameraIsPersp = _this$recordStates.cameraIsPersp,\n        schleProjEnable = _this$recordStates.schleProjEnable;\n      var rot = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.getSortedValuesDesc(rots).reduce(function (accumulator, currentMatrix) {\n        var product = new three__WEBPACK_IMPORTED_MODULE_11__.Matrix4();\n        product.multiplyMatrices(accumulator, currentMatrix);\n        return product;\n      }, new three__WEBPACK_IMPORTED_MODULE_11__.Matrix4().identity());\n      this.camera.position.set(0, 0, 120);\n      this.camera.rotation.set(0, 0, 0);\n      this.rotUni.value = rot;\n      this.ofsUni.value = ofs;\n      this.ofs3Uni.value = ofs3;\n      this.sphereRadiusUni.value = verticesEdgesDim * 2 / this.scaleFactor;\n      this.cylinderRadiusUni.value = verticesEdgesDim / this.scaleFactor;\n      this.projDistUni.value = projDist;\n      this.isOrthoUni.value = !schleProjEnable;\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.facesGroup, 'opacity', faceOpacity);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.facesGroup, 'transparent', faceOpacity !== 1);\n\n      /* eslint-disable */\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.facesGroup, 'visible', (_visibilities$faces = visibilities.faces) !== null && _visibilities$faces !== void 0 ? _visibilities$faces : true);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.wireframeGroup, 'visible', (_visibilities$wirefra = visibilities.wireframe) !== null && _visibilities$wirefra !== void 0 ? _visibilities$wirefra : true);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.verticesGroup, 'visible', (_visibilities$vertice = visibilities.vertices) !== null && _visibilities$vertice !== void 0 ? _visibilities$vertice : true);\n      _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.changeMaterialProperty(this.axesGroup, 'visible', (_visibilities$axes = visibilities.axes) !== null && _visibilities$axes !== void 0 ? _visibilities$axes : true);\n      /* eslint-enable */\n\n      this.toggleCamera(cameraIsPersp);\n      this.render();\n    }\n\n    /**\n     * 更新录制状态。\n     * @param {number} frameIndex - 帧索引。\n     * @throws {Error} 当任何动作导致错误值时抛出，包含具体的错误信息。\n     */\n  }, {\n    key: \"updateRecordStates\",\n    value: function updateRecordStates(frameIndex) {\n      var currrentActions = this.recordConfig.actions.filter(function (i) {\n        return i.start <= frameIndex && frameIndex < i.end || frameIndex === i.at;\n      });\n      var _iterator = _createForOfIteratorHelper(currrentActions),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var action = _step.value;\n          switch (action.type) {\n            case 'rot':\n              {\n                var rotAng = [0, 0, 0, 0, 0, 0];\n                rotAng[action.plane] = action.angle / (action.end - action.start);\n                if (this.recordStates.rots[action.index]) {\n                  this.recordStates.rots[action.index].multiply(_helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.create4DRotationMat.apply(_helperFunc_js__WEBPACK_IMPORTED_MODULE_5__, rotAng));\n                } else {\n                  this.recordStates.rots[action.index] = _helperFunc_js__WEBPACK_IMPORTED_MODULE_5__.create4DRotationMat.apply(_helperFunc_js__WEBPACK_IMPORTED_MODULE_5__, rotAng);\n                }\n                break;\n              }\n            case 'trans4':\n              this.recordStates.ofs.add(_construct(three__WEBPACK_IMPORTED_MODULE_11__.Vector4, _toConsumableArray(action.ofs)).divideScalar(action.end - action.start));\n              break;\n            case 'trans3':\n              this.recordStates.ofs3.add(_construct(three__WEBPACK_IMPORTED_MODULE_11__.Vector3, _toConsumableArray(action.ofs)).divideScalar(action.end - action.start));\n              break;\n            case 'setVerticesEdgesDim':\n              this.recordStates.verticesEdgesDim += action.dimOfs / (action.end - action.start);\n              if (this.recordStates.verticesEdgesDim <= 0) throw new Error(\"actions[\".concat(action.index, \"] \\u9519\\u8BEF\\u5730\\u5BFC\\u81F4\\u8FB9\\u548C\\u9876\\u70B9\\u7684\\u5C3A\\u5BF8\\u4E3A\\u8D1F\\u6570\\u3002\"));\n              break;\n            case 'setProjDist':\n              this.recordStates.projDist += action.projDistOfs / (action.end - action.start);\n              if (this.recordStates.projDist <= 0) throw new Error(\"actions[\".concat(action.index, \"] \\u9519\\u8BEF\\u5730\\u5BFC\\u81F4\\u6295\\u5F71\\u8DDD\\u79BB\\u4E3A\\u8D1F\\u6570\\u3002\"));\n              break;\n            case 'setFaceOpacity':\n              this.recordStates.faceOpacity += action.faceOpacityOfs / (action.end - action.start);\n              if (this.recordStates.faceOpacity < 0 || this.recordStates.faceOpacity > 1) throw new Error(\"actions[\".concat(action.index, \"] \\u9519\\u8BEF\\u5730\\u5BFC\\u81F4\\u9762\\u900F\\u660E\\u5EA6\\u8D85\\u51FA 0~1 \\u7684\\u8303\\u56F4\\u3002\"));\n              break;\n            case 'setVisibility':\n              this.recordStates.visibilities[action.target] = action.visibility;\n              break;\n            case 'setCameraProjMethod':\n              this.recordStates.cameraIsPersp = action.projMethod === 'persp';\n              break;\n            case 'setSchleProjEnable':\n              this.recordStates.schleProjEnable = action.enable;\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }]);\n}();\ndocument.addEventListener('DOMContentLoaded', function () {\n  return new PolytopeRendererApp();\n});\n\n//# sourceURL=webpack:///./src/viewer.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "js/" + chunkId + ".chunk.js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/^blob:/, "").replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl + "../";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		__webpack_require__.b = document.baseURI || self.location.href;
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"index": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunk"] = self["webpackChunk"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendors","default-src_offProcessor_js-src_offProcessor4D_js"], () => (__webpack_require__("./src/viewer.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;